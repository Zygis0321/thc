{"version":3,"sources":["services/player-service.ts","components/players-autocomplete.tsx","data/scorecalc-data.ts","components/rankedplayers-list.tsx","components/home.tsx","services/tournament-service.ts","components/players-chart.tsx","components/progress.tsx","App.tsx","store/players/player-actions.ts","store/players/player-types.ts","serviceWorker.ts","store/players/player-reducers.ts","store/combineReducers.ts","store/index.ts","store/createStore.ts","index.tsx"],"names":["playersService","prefScores","rankPlayers","players","i","length","lowestScore","newPoints","points","Math","max","score","rank","j","newRank","recalc","level","pos","value","map","p","sort","a","b","valueSum","min","coefficient","maxScore","winnerpoints","floor","content","stringArray","split","ln","ret","player","Number","id","name","club","nation","push","el","document","createElement","innerHTML","list","getElementsByClassName","cnt","ind","indexOf","substr","this","Array","fill","PlayersAutoComplete","state","searchText","handleSearchChange","e","setState","target","TextField","label","variant","onChange","fullWidth","InputProps","endAdornment","InputAdornment","position","Search","color","List","dense","props","filter","toLowerCase","includes","slice","from","ListItem","key","button","onClick","handlePlayerToggle","ListItemText","primary","secondary","ListItemSecondaryAction","Checkbox","edge","checked","playersCompare","some","Box","pt","pl","pr","Skeleton","width","Component","levelList","percentageList","appliedFrom","Date","UTC","appliedUntil","tournamentAge","percentage","listItemStyle","boxShadow","backgroundColor","marginTop","marginBottom","ratingUpStyle","fontWeight","ratingDownStyle","ratingConstantStyle","SortableItem","SortableElement","children","style","SortableList","SortableContainer","RankedPlayersList","onSortEnd","reorder","shouldCancelStart","undefined","nearestViewportElement","useWindowAsScrollContainer","Grid","item","xs","Typography","align","index","container","direction","mr","abs","justify","display","alignItems","justifyContent","marginRight","IconButton","size","playerRemoved","Clear","HomeComponent","selectedLevel","levelName","levelFound","find","oldIndex","newIndex","arrayMove","playerAdded","prevState","concat","$","ajax","then","res","items","catch","console","log","handleClearAllClick","playerId","handleLevelChange","prevProps","setPlayerScores","Container","spacing","FormControl","InputLabel","Select","MenuItem","Button","startIcon","ClearAll","float","Home","connect","tournamentsService","addYears","dt","n","dtt","setFullYear","getFullYear","getPointsByDate","tournaments","start","now","datesToCheck","newDate","date","round","getTime","best5","best","sum","end","scalePointsByDate","density","startRange","endRange","startTime","endTime","step","toUTCString","PlayersChart","yearRange","getYearRange","handleYearChange","event","newValue","handleDensityChange","playerPoints","getUTCFullYear","Slider","valueLabelDisplay","aria-labelledby","marks","height","data","getMaxDate","stroke","strokeDasharray","dataKey","interval","angle","dx","type","dot","strokeWidth","ProgressComponent","handlePlayerChange","getJSON","Autocomplete","options","getOptionLabel","option","renderInput","params","filterOptions","createFilterOptions","limit","CircularProgress","Progress","AppComponent","parseContent","updatePlayers","exact","path","component","displayName","App","dispatch","payload","Boolean","window","location","hostname","match","initialState","rootReducer","combineReducers","action","store","createStore","reducer","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.1b767070.chunk.js","sourcesContent":["import { Level } from \"../data/scorecalc-data\";\r\n\r\n\r\nexport interface Player{\r\n    name: string,\r\n    id: string,\r\n    rank: number,\r\n    nation: string,\r\n    points: number,\r\n    value: number\r\n    club: string\r\n}\r\n\r\nexport interface PlayerRanked extends Player{\r\n    pos: number\r\n    lowestScore: number\r\n    score: number\r\n    newRank: number\r\n    newPoints: number\r\n}\r\n\r\nclass PlayersService {\r\n\r\n    private prefScores:number[] = []\r\n\r\n    rankPlayers = (players: PlayerRanked[]): PlayerRanked[] => {\r\n        for(let i=0; i<players.length; i++){\r\n            if(players[i].lowestScore === -1){\r\n                continue\r\n            }\r\n            players[i].newPoints = players[i].points + Math.max(0, players[i].score - players[i].lowestScore)\r\n        }\r\n        for(let i=0; i<players.length; i++){\r\n            if(players[i].lowestScore === -1){\r\n                continue\r\n            }\r\n\r\n            let rank: number = this.prefScores[players[i].newPoints + 1] + 1\r\n            for(let j=0; j<players.length; j++){\r\n                if(players[j].lowestScore === -1)continue\r\n                if(players[j].points>players[i].newPoints)rank--\r\n                if(players[j].newPoints>players[i].newPoints)rank++\r\n            }\r\n            players[i].rank = this.prefScores[players[i].points + 1] + 1\r\n            players[i].newRank = rank\r\n        }\r\n\r\n        return players\r\n    }\r\n\r\n    recalc = (players: PlayerRanked[], level: Level): PlayerRanked[] => {\r\n        \r\n        \r\n        //set player pos\r\n        for(var i=0; i<players.length; i++){\r\n            players[i].pos=i+1\r\n            players[i].score=0;\r\n        }\r\n        \r\n        \r\n        if(players.length<4){\r\n            return players;\r\n        }\r\n        \r\n        \r\n        //which player beaten\r\n        var value:number[] = players.map(p => p.value).sort((a,b) => b-a)\r\n        for(let i=0; i+1<players.length; i++){\r\n            let valueSum: number = 0;\r\n            for(var j=i; j<Math.min(i+4, players.length); j++){\r\n                valueSum+=value[j]\r\n            }\r\n            players[i].score = Math.max(players[i].score, (valueSum/4)*level.coefficient);\r\n        }\r\n        //number of beaten\r\n        for(let i=0; i<players.length; i++){\r\n            let maxScore: number = (((70-1)*(players.length - i - 1))/(players.length-1))+1\r\n            players[i].score = Math.max(players[i].score, Math.min(maxScore,players.length-i))\r\n        }\r\n\r\n        //scalar\r\n        let points:number = level.winnerpoints\r\n        for(let i=0; i+1<players.length; i++){\r\n            players[i].score = Math.max(players[i].score, points)\r\n            points/=2\r\n        }\r\n\r\n        //linear\r\n        for(let i=0; i<players.length; i++){\r\n            let score: number = (((level.winnerpoints-1)*(players.length-i-1))/(players.length-1))+1\r\n            players[i].score = Math.max(players[i].score, score)\r\n        }\r\n\r\n        //sum up\r\n        for(let i=0; i<players.length; i++){\r\n            players[i].score = Math.floor(players[i].score)\r\n        }\r\n        players[0].score+=10\r\n\r\n        return players\r\n    }\r\n\r\n    parseContent(content: string): Player[]{\r\n        const stringArray = content.split('\\n').map((ln) => {\r\n            return ln.split('\\t');\r\n        });\r\n        let ret: Player[] = []\r\n        for(var i=2; i+1<stringArray.length; i++){\r\n            const player:Player = {\r\n                rank: Number(stringArray[i][0]),\r\n                id: stringArray[i][1],\r\n                name: stringArray[i][2],\r\n                club: stringArray[i][3],\r\n                nation: stringArray[i][4],\r\n                points: Number(stringArray[i][5]),\r\n                value: Number(stringArray[i][6]),\r\n            }\r\n            ret.push(player)\r\n        }\r\n        return ret\r\n    }\r\n\r\n    parsePlayerMinPoints(content: string): number{\r\n        var el = document.createElement('html');\r\n        el.innerHTML = content\r\n        var list = el.getElementsByClassName(\"normTour\");\r\n        \r\n        var ret:number = 100000;\r\n        var cnt:number = 0;\r\n        for(var i=6; i<list.length; i+=7){\r\n            let ind:number = list[i].innerHTML.indexOf('(')\r\n            if(ind===-1)ind=list[i].innerHTML.length\r\n            let score:string = list[i].innerHTML.substr(0, ind);\r\n            ret = Math.min(ret, Number(score));\r\n            cnt++\r\n        }\r\n        if(cnt<5)ret=0\r\n        return ret\r\n    }\r\n\r\n    setPlayerScores(players: Player[]): void{\r\n        this.prefScores = new Array(6005).fill(0)\r\n        for(let i=0; i<players.length; i++){\r\n            this.prefScores[players[i].points]++;\r\n        }\r\n        \r\n        for(let i=6000; i>=0; i--){\r\n            this.prefScores[i]+=this.prefScores[i+1]\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nconst playersService = new PlayersService();\r\nexport default playersService","import { Box, Checkbox, InputAdornment, List, ListItem, ListItemSecondaryAction, ListItemText } from '@material-ui/core';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Search, SearchOutlined } from '@material-ui/icons';\r\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport React, { Component } from 'react';\r\nimport { Player, PlayerRanked } from '../services/player-service';\r\n//import matchSorter from 'match-sorter'\r\n\r\ninterface OwnProps{\r\n    players: Player[]\r\n    handlePlayerToggle: (player: Player) => void\r\n    playersCompare: Player[]\r\n}\r\ninterface State{\r\n    searchText: string\r\n}\r\n\r\ntype Props = OwnProps\r\n\r\n\r\nexport class PlayersAutoComplete extends Component<Props, State>{\r\n    public readonly state: State = {\r\n        searchText: ''\r\n    }\r\n    render(): React.ReactNode{\r\n\r\n        return(\r\n\r\n            <>\r\n                \r\n\r\n                <TextField \r\n                    label=\"Players\" \r\n                    variant=\"outlined\" \r\n                    onChange={this.handleSearchChange} \r\n                    fullWidth\r\n                    InputProps={{\r\n                        endAdornment: (\r\n                            <InputAdornment position=\"end\">\r\n                                <Search color='action'/>\r\n                            </InputAdornment>\r\n                        )\r\n                    }}\r\n                />\r\n                <List dense>\r\n                    {(!this.props.players.length ? Array.from(new Array(10)) : \r\n                        this.props.players.filter(p => p.name.toLowerCase().includes(this.state.searchText.toLowerCase())).slice(0, 10))\r\n                        .map((player) => {\r\n                            return (\r\n                                player ? (\r\n                                    <ListItem key={player.id} button onClick={() => this.props.handlePlayerToggle(player)}>\r\n                                        <ListItemText id={player.id+player.name} primary={player.name} secondary={player.club} />\r\n                                        <ListItemSecondaryAction>\r\n                                            <Checkbox\r\n                                                edge=\"end\"\r\n                                                onChange={() => this.props.handlePlayerToggle(player)}\r\n                                                checked={this.props.playersCompare.some(p => p.id==player.id)}\r\n                                            />\r\n                                        </ListItemSecondaryAction>\r\n                                    </ListItem>\r\n                                ) : (\r\n                                    <Box pt={2} pl={1} pr={1}>\r\n                                        <Skeleton />\r\n                                        <Skeleton width=\"60%\" />\r\n                                    </Box>\r\n                                )\r\n                            )\r\n                        })}\r\n                </List>\r\n            </>\r\n        )\r\n    }\r\n    private readonly handleSearchChange = (e: any): void => {\r\n        this.setState({searchText: e.target.value});\r\n    }\r\n}","export interface Level {\r\n    name: string,\r\n    coefficient: number,\r\n    winnerpoints: number\r\n}\r\n\r\nexport const levelList: Level[] = [\r\n    {name: \"Level 1 (World)\", coefficient: 0.96, winnerpoints: 1000},\r\n    {name: \"Level 1 (Continental)\", coefficient: 0.96, winnerpoints: 600},\r\n    {name: \"Level 2\", coefficient: 0.92, winnerpoints: 500},\r\n    {name: \"Level 3\", coefficient: 0.89, winnerpoints: 100},\r\n    {name: \"Level 4\", coefficient: 0.83, winnerpoints: 70},\r\n    {name: \"Level 5\", coefficient: 0.60, winnerpoints: 40},\r\n    {name: \"Level 6\", coefficient: 0.40, winnerpoints: 20},\r\n]\r\n\r\nexport interface PointsPercentage {\r\n    appliedFrom: Date,\r\n    appliedUntil: Date,\r\n    tournamentAge: number,\r\n    percentage: number\r\n}\r\n\r\nexport const percentageList: PointsPercentage[] = [\r\n    {\r\n        appliedFrom: new Date(Date.UTC(1111, 0)),\r\n        appliedUntil: new Date(Date.UTC(3333,0)),\r\n        tournamentAge: 0,\r\n        percentage: 1\r\n    },\r\n    {\r\n        appliedFrom: new Date(Date.UTC(1111, 0)),\r\n        appliedUntil: new Date(Date.UTC(2020, 9, 4)),\r\n        tournamentAge: 2,\r\n        percentage: 0.8\r\n    },\r\n    {\r\n        appliedFrom: new Date(Date.UTC(2020, 9, 5)),\r\n        appliedUntil: new Date(Date.UTC(2021, 5, 30)),\r\n        tournamentAge: 2,\r\n        percentage: 1\r\n    },\r\n    {\r\n        appliedFrom: new Date(Date.UTC(2021, 6, 1)),\r\n        appliedUntil: new Date(Date.UTC(3333, 0)),\r\n        tournamentAge: 2,\r\n        percentage: 0.8\r\n    },\r\n    {\r\n        appliedFrom: new Date(Date.UTC(1111, 0)),\r\n        appliedUntil: new Date(Date.UTC(3333,0)),\r\n        tournamentAge: 3,\r\n        percentage: 0.6\r\n    },\r\n    {\r\n        appliedFrom: new Date(Date.UTC(1111, 0)),\r\n        appliedUntil: new Date(Date.UTC(3333,0)),\r\n        tournamentAge: 4,\r\n        percentage: 0.4\r\n    },\r\n    {\r\n        appliedFrom: new Date(Date.UTC(1111, 0)),\r\n        appliedUntil: new Date(Date.UTC(3333,0)),\r\n        tournamentAge: 5,\r\n        percentage: 0.2\r\n    },\r\n    {\r\n        appliedFrom: new Date(Date.UTC(1111, 0)),\r\n        appliedUntil: new Date(Date.UTC(3333,0)),\r\n        tournamentAge: 6,\r\n        percentage: 0\r\n    },\r\n]\r\nexport const ruleChangeDates: Date[] = [\r\n    new Date(Date.UTC(2020, 9, 5)),\r\n    new Date(Date.UTC(2021, 6, 1))\r\n]","import { Box, Grid, IconButton, List, ListItem, ListItemText, Typography } from \"@material-ui/core\";\r\nimport React, { Component } from \"react\";\r\nimport { SortableElement, SortableContainer } from \"react-sortable-hoc\";\r\nimport CSS from 'csstype';\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport { PlayerRanked } from \"../services/player-service\";\r\nimport { Clear } from \"@material-ui/icons\";\r\n\r\nconst listItemStyle: CSS.Properties = {\r\n    boxShadow: '0 2px 4px 0 rgba(0, 0, 0, 0.2)',\r\n    backgroundColor: 'rgb(255, 255, 255)',\r\n    marginTop: '12px',\r\n    marginBottom: '12px'\r\n}\r\n\r\nconst ratingUpStyle: CSS.Properties = {\r\n    fontWeight: 600,\r\n    color: '#5eb560'\r\n}\r\nconst ratingDownStyle: CSS.Properties = {\r\n    fontWeight: 600,\r\n    color: '#f97373'\r\n}\r\nconst ratingConstantStyle: CSS.Properties = {\r\n    fontWeight: 600,\r\n    color: '#969696'\r\n}\r\n\r\nconst SortableItem = SortableElement(({children}:any) => { \r\n    return(\r\n        <ListItem style={listItemStyle}>{children}</ListItem>\r\n    )\r\n});\r\n\r\nconst SortableList = SortableContainer(({children}:any) => {\r\n  return <List>{children}</List>;\r\n});\r\n\r\ninterface OwnProps{\r\n    playersCompare: PlayerRanked[] \r\n    reorder: ({oldIndex, newIndex}: any) => void\r\n    playerRemoved: (playerId: string) => void\r\n}\r\n\r\ntype Props = OwnProps\r\n\r\nexport class RankedPlayersList extends Component<Props, {}>{\r\n\r\n    render(): React.ReactNode{\r\n        return(\r\n            <SortableList \r\n                onSortEnd={this.props.reorder} \r\n                shouldCancelStart = {(e: any) => {\r\n                    if(\r\n                        e.target.id == \"buttonRemove\" || \r\n                        e.target.nearestViewportElement !== undefined && \r\n                        e.target.nearestViewportElement.id === \"buttonRemove\"\r\n                    ){\r\n                        return true\r\n                    }\r\n                }} \r\n                useWindowAsScrollContainer\r\n            >\r\n                <ListItem>\r\n                    <Grid item xs = {1}>\r\n                        <Typography >#</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                        <Typography >Name</Typography>\r\n\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                        <Typography >Rank</Typography>\r\n\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                        <Typography >Points</Typography>\r\n\r\n                    </Grid>\r\n                    <Grid item xs={2}>\r\n                        <Typography align='justify' >Tournament Points</Typography>\r\n                    </Grid>\r\n                </ListItem>\r\n                {this.props.playersCompare.map((value, index) => (\r\n                <SortableItem key={index} index={index}>\r\n                    <Grid item xs = {1}>\r\n                    <Typography><b>{value.pos}</b></Typography>\r\n\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                        <Typography>{value.name}</Typography>\r\n\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                        {\r\n                            value.lowestScore===-1 ? <Skeleton width={70}/> :(\r\n                            <Grid container direction='row' >\r\n                                <Box mr={0.5}><Typography>{value.newRank}</Typography></Box>\r\n                                {\r\n                                    value.rank > value.newRank ? <Typography style={ratingUpStyle}>{`(+${Math.abs(value.rank-value.newRank)})`}</Typography>:\r\n                                    value.rank === value.newRank ? <Typography style={ratingConstantStyle}>{`(=${value.rank-value.newRank})`}</Typography> :\r\n                                    <Typography style={ratingDownStyle}>{`(-${Math.abs(value.rank-value.newRank)})`}</Typography>\r\n                                } \r\n                            </Grid>\r\n                            )\r\n                        }\r\n\r\n                    </Grid>\r\n\r\n                    <Grid item xs>\r\n                        {\r\n                            value.lowestScore===-1 ? <Skeleton width={70}/> :(\r\n                                <Grid container direction='row' >\r\n                                    <Box mr={0.5}><Typography>{value.newPoints}</Typography></Box>\r\n                                    {\r\n                                        value.points < value.newPoints ? <Typography style={ratingUpStyle}>{`(+${Math.abs(value.points-value.newPoints)})`}</Typography>:\r\n                                        <Typography style={ratingConstantStyle}>{`(=${value.points-value.newPoints})`}</Typography> \r\n                                    } \r\n                                </Grid>\r\n                                )\r\n                        }\r\n                        \r\n\r\n                    </Grid>\r\n                    <Grid item xs={2}>\r\n                        <Grid container direction='row' justify='flex-end'>\r\n                            <Box  display=\"flex\" alignItems=\"center\" justifyContent=\"flex-end\" marginRight={2} >\r\n                                <Typography align='right'><b>{value.score}</b></Typography>\r\n                            </Box>\r\n                            <Box display=\"flex\" alignItems=\"center\" justifyContent=\"flex-end\">\r\n                                <IconButton size='small' onClick = {() => this.props.playerRemoved(value.id)} id=\"buttonRemove\">\r\n                                    <Clear id=\"buttonRemove\"/>\r\n                                </IconButton>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                </SortableItem>\r\n                ))}\r\n            </SortableList>\r\n        )\r\n    }\r\n\r\n}","import React, { Component } from 'react';\r\nimport playersService, { Player, PlayerRanked } from '../services/player-service';\r\nimport { PlayersAutoComplete } from './players-autocomplete';\r\nimport $ from \"jquery\";\r\nimport { Box, Button, Container, FormControl, Grid, InputLabel, MenuItem, Select } from '@material-ui/core';\r\nimport arrayMove from 'array-move';\r\nimport { Level, levelList } from '../data/scorecalc-data';\r\nimport { ClearAll } from '@material-ui/icons';\r\nimport { RankedPlayersList } from './rankedplayers-list';\r\nimport { RootState } from '../store/combineReducers';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\ninterface State{\r\n    playersCompare: PlayerRanked[] \r\n    selectedLevel: string\r\n}\r\n\r\ntype Props = ReturnType<typeof mapStateToProps>\r\n\r\nexport class HomeComponent extends Component<Props, State>{\r\n\r\n    public readonly state: State = {\r\n        playersCompare: [],\r\n        selectedLevel: levelList[0].name\r\n    }\r\n    \r\n    \r\n\r\n\r\n    private readonly recalc = (players: PlayerRanked[], levelName: string): PlayerRanked[] => {\r\n        let levelFound = levelList.find(level => level.name==levelName)\r\n        let level:Level = levelFound ? levelFound : levelList[0]\r\n        return playersService.rankPlayers(playersService.recalc(players, level));\r\n    }\r\n\r\n    private readonly reorder = ({oldIndex, newIndex}: any): void => {\r\n        this.setState(({playersCompare}) => ({\r\n            playersCompare: this.recalc(arrayMove(playersCompare, oldIndex, newIndex), this.state.selectedLevel),\r\n        }));\r\n      };\r\n    \r\n    public componentDidUpdate(prevProps: Props): void{\r\n        if(prevProps.players.length===0 && this.props.players.length > 0){\r\n            playersService.setPlayerScores(this.props.players)\r\n        }\r\n    }\r\n\r\n    public componentDidMount(): void{\r\n\r\n    }\r\n\r\n    render(): React.ReactNode{\r\n        return(\r\n            <Container>\r\n                <Box pt={5}>\r\n                <Grid container spacing={3}>\r\n                    <Grid item xs={3}>\r\n                        <PlayersAutoComplete\r\n                            players = {this.props.players}\r\n                            handlePlayerToggle = {this.handlePlayerToggle}\r\n                            playersCompare = {this.state.playersCompare}\r\n                            ///checked = {this.state.playersCompare.map(player => player.id).sort()}\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                        <Grid container justify='space-between' alignItems='center'>\r\n                            <Grid item>\r\n                            <FormControl>\r\n                                <InputLabel>Level</InputLabel>\r\n                                <Select\r\n                                    value={this.state.selectedLevel}\r\n                                    onChange={this.handleLevelChange}\r\n                                >\r\n                                    {levelList.map(level => <MenuItem value={level.name}>{level.name}</MenuItem> )}\r\n                                </Select>\r\n                            </FormControl>\r\n                            </Grid>\r\n                            <Grid item>\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                color=\"secondary\"\r\n                                startIcon={<ClearAll />}\r\n                                onClick={this.handleClearAllClick}\r\n                                style={{float:'right'}}\r\n                            >\r\n                                Clear\r\n                            </Button>\r\n                            </Grid>\r\n                        </Grid>\r\n                        <RankedPlayersList\r\n                            playersCompare = {this.state.playersCompare}\r\n                            reorder = {this.reorder}\r\n                            playerRemoved = {this.playerRemoved}\r\n                        />\r\n                    </Grid>\r\n            \r\n                </Grid>\r\n                \r\n                </Box>\r\n            </Container>\r\n\r\n        )\r\n    }\r\n\r\n    private readonly handlePlayerToggle = (player: Player): void => {\r\n        if(this.state.playersCompare.some(p => p.id==player.id)){\r\n            this.playerRemoved(player.id)\r\n        }\r\n        else{\r\n            this.playerAdded(player);\r\n        }\r\n    }\r\n    private readonly playerAdded = (player: Player): void => {\r\n\r\n        this.setState(prevState => ({\r\n            ...prevState,\r\n            playersCompare: this.recalc(prevState.playersCompare.concat({\r\n                ...player, \r\n                pos:prevState.playersCompare.length+1, \r\n                score:-1, \r\n                lowestScore:-1,\r\n                newRank:-1,\r\n                newPoints:-1\r\n            }), prevState.selectedLevel)\r\n        }))\r\n        $.ajax('https://serene-crag-74633.herokuapp.com/single/'+player.id)\r\n        .then(res => {\r\n            \r\n            let score = Number(res);\r\n            let items = [...this.state.playersCompare]\r\n            for(var i=0; i<items.length; i++){\r\n                if(items[i].id === player.id && items[i].lowestScore===-1){\r\n                    let item = {...items[i]}\r\n                    item.lowestScore=score\r\n                    \r\n                    items[i]=item\r\n                    \r\n                    this.setState({playersCompare: this.recalc(items, this.state.selectedLevel)})\r\n\r\n                    break\r\n                }\r\n            }\r\n        \r\n        })\r\n        .catch(() => {\r\n            console.log(\"error\")\r\n        })\r\n\r\n    }\r\n    private readonly handleClearAllClick = (): void => {\r\n        this.setState({\r\n            playersCompare: []\r\n        })\r\n    }\r\n    private readonly playerRemoved = (playerId: string): void => {\r\n        this.setState(({playersCompare, selectedLevel}) => ({\r\n            playersCompare: this.recalc(playersCompare.filter(player => player.id !== playerId), selectedLevel)\r\n        }))\r\n    }\r\n    private readonly handleLevelChange = (e: any): void => {\r\n        \r\n        this.setState(({playersCompare}) => ({\r\n            selectedLevel: e.target.value,\r\n            playersCompare: this.recalc(playersCompare, e.target.value)\r\n            \r\n        }));\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) =>({\r\n    players: state.players\r\n});\r\n\r\nconst Home = connect(mapStateToProps)(HomeComponent)\r\nexport {Home}","import { percentageList, ruleChangeDates } from \"../data/scorecalc-data\";\r\nimport { Player } from \"./player-service\";\r\n\r\nexport interface Tournament{\r\n    date: Date,\r\n    name: string,\r\n    series: string[],\r\n    city: string,\r\n    pos: number,\r\n    points: number\r\n}\r\n\r\nexport interface PlayerWithTournaments extends Player{\r\n    tournaments: PointsByDate[]\r\n}\r\n\r\nexport interface PointsByDate {\r\n    date: Date,\r\n    points: number\r\n}\r\n\r\ninterface PointsByDatePrecalc extends PointsByDate {\r\n    ind: number\r\n}\r\n\r\ninterface ChartData {\r\n    date: string,\r\n    points: number\r\n}\r\n\r\nclass TournamentsService {\r\n\r\n    private readonly addYears = (dt: Date, n: number): Date => {\r\n        let dtt = new Date(dt)\r\n        return new Date(dtt.setFullYear(dtt.getFullYear() + n))\r\n    }\r\n\r\n    getPointsByDate = (tournaments: Tournament[]): PointsByDate[] => {\r\n        var start = Date.now()\r\n        \r\n        let datesToCheck: PointsByDatePrecalc[] = []\r\n        for(let i=0; i<tournaments.length; i++) {\r\n            for(let percentage of percentageList){\r\n                let newDate: Date = this.addYears(tournaments[i].date, percentage.tournamentAge)\r\n                if(newDate < percentage.appliedFrom || newDate > percentage.appliedUntil){\r\n                    continue\r\n                }\r\n\r\n                datesToCheck.push({\r\n                    date: newDate,\r\n                    points: Math.round(tournaments[i].points * percentage.percentage),\r\n                    ind: i\r\n                })\r\n\r\n            }\r\n        }\r\n\r\n        datesToCheck = datesToCheck.sort((a, b) => {\r\n            return new Date(a.date).getTime() - new Date(b.date).getTime()\r\n        })\r\n        \r\n        let best5: PointsByDatePrecalc[] = []\r\n        let ret:PointsByDate[] = []\r\n\r\n        for(let date of datesToCheck){\r\n            best5 = best5.filter((best) => best.ind !== date.ind)\r\n            best5.push(date)\r\n            best5 = best5.sort((a, b) => b.points - a.points)\r\n            let sum = 0\r\n\r\n            for(let i=0; i< Math.min(best5.length, 5); i++){\r\n                sum += best5[i].points;\r\n            }\r\n            ret.push({\r\n                date: date.date,\r\n                points: sum\r\n            })\r\n        }\r\n        var end = Date.now()\r\n        console.log(\"elapsed \"+(end-start))\r\n\r\n\r\n        return ret\r\n    }\r\n    scalePointsByDate = (points: PointsByDate[], density: number, startRange: Date, endRange: Date): ChartData[] => {\r\n        let startTime = startRange.getTime();\r\n        let endTime = endRange.getTime();\r\n        let step = (endTime - startTime) / density\r\n        let ind = 0\r\n        let score = 0\r\n        let ret:ChartData[] = []\r\n        for(let i=startTime; i<=endTime; i+=step){\r\n            while(ind < points.length && points[ind].date.getTime() <= i){\r\n                score = points[ind].points\r\n                ind++\r\n            }\r\n            ret.push({\r\n                date: new Date(i).toUTCString().slice(5, 16),\r\n                points: score\r\n            })\r\n        }\r\n        console.log(ret)\r\n        return ret\r\n    }\r\n}\r\n\r\nconst tournamentsService = new TournamentsService();\r\nexport default tournamentsService","import React, { Component } from \"react\";\r\nimport tournamentsService, { PlayerWithTournaments, PointsByDate } from \"../services/tournament-service\";\r\nimport {CartesianGrid, Legend, Line, LineChart, ResponsiveContainer, Tooltip, XAxis, YAxis} from \"recharts\"\r\nimport playersService from \"../services/player-service\";\r\nimport { PlayersAutoComplete } from \"./players-autocomplete\";\r\nimport { Slider, Typography } from \"@material-ui/core\";\r\n\r\ninterface OwnProps{\r\n    playerPoints: PointsByDate[]\r\n}\r\n\r\ntype Props = OwnProps\r\n\r\ninterface State{\r\n    yearRange: number[],\r\n    density: number\r\n}\r\n\r\n\r\nexport class PlayersChart extends Component<Props, State>{\r\n\r\n    public readonly state:State = {\r\n        yearRange: this.getYearRange(),\r\n        density: 20\r\n    }\r\n\r\n    getYearRange(): number[]{\r\n        return [\r\n            this.props.playerPoints[0].date.getUTCFullYear(),\r\n            this.props.playerPoints[this.props.playerPoints.length-1].date.getUTCFullYear(),\r\n        ]\r\n    }\r\n\r\n    getMaxDate(a: Date, b:Date): Date{\r\n        if(a>b)return a\r\n        return b\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props): void{\r\n        if(prevProps.playerPoints !== this.props.playerPoints){\r\n            this.setState({yearRange: this.getYearRange()})\r\n        }\r\n    }\r\n\r\n    render(): React.ReactNode{\r\n        const {\r\n            yearRange,\r\n            density\r\n        } = this.state\r\n\r\n        return(\r\n            <>\r\n                <Typography>\r\n                    Year Range\r\n                </Typography>\r\n                <Slider\r\n                    value = {this.state.yearRange}\r\n                    onChange={this.handleYearChange}\r\n                    valueLabelDisplay=\"auto\"\r\n                    aria-labelledby=\"range-slider\"\r\n                    marks\r\n                    step = {1}\r\n                    min = {this.getYearRange()[0]}\r\n                    max = {this.getYearRange()[1]}\r\n                />\r\n                <Typography>\r\n                    Chart Density\r\n                </Typography>\r\n                <Slider\r\n                    value = {this.state.density}\r\n                    onChange={this.handleDensityChange}\r\n                    valueLabelDisplay=\"auto\"\r\n                    aria-labelledby=\"range-slider\"\r\n                    min = {5}\r\n                    max = {50}\r\n                />\r\n                <div style={{ width: '100%', height: 300 }}>\r\n                    <ResponsiveContainer>\r\n                        <LineChart\r\n                            data={tournamentsService.scalePointsByDate(\r\n                                this.props.playerPoints,\r\n                                density, \r\n                                this.getMaxDate(new Date(Date.UTC(yearRange[0], 0)), this.props.playerPoints[0].date), \r\n                                new Date(Date.UTC(yearRange[1], 0))\r\n                            )}\r\n                        >\r\n                            <CartesianGrid stroke=\"#eee\" strokeDasharray=\"5 5\"/>\r\n                            <XAxis dataKey=\"date\" interval={0} angle={30} dx={20} />\r\n                            <YAxis />\r\n                            <Tooltip />\r\n                            <Legend />\r\n                            <Line type=\"monotone\" dataKey=\"points\" stroke=\"#8884d8\" dot={false} strokeWidth = {2}/>\r\n                        </LineChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n    private readonly handleYearChange = (event: any, newValue: number | number[]) => {\r\n        this.setState({yearRange: newValue as number[]});\r\n    };\r\n    private readonly handleDensityChange = (event: any, newValue: number | number[]) => {\r\n        this.setState({density: newValue as number});\r\n    };\r\n\r\n}","import { CircularProgress, Slider, TextField, Typography } from '@material-ui/core';\r\nimport Box from '@material-ui/core/Box/Box';\r\nimport Button from '@material-ui/core/Button/Button';\r\nimport Container from '@material-ui/core/Container/Container';\r\nimport Grid from '@material-ui/core/Grid/Grid';\r\nimport { ClearAll, ThreeSixty } from '@material-ui/icons';\r\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Player } from '../services/player-service';\r\nimport tournamentsService, { PlayerWithTournaments, PointsByDate, Tournament } from '../services/tournament-service';\r\nimport { RootState } from '../store/combineReducers';\r\nimport { PlayersAutoComplete } from './players-autocomplete';\r\nimport $ from \"jquery\";\r\nimport { RankedPlayersList } from './rankedplayers-list';\r\nimport { PlayersChart } from './players-chart';\r\n\r\ntype Props = ReturnType<typeof mapStateToProps>\r\n\r\ninterface State{\r\n    playerPoints: PointsByDate[]\r\n}\r\n\r\nexport class ProgressComponent extends Component<Props, State>{\r\n\r\n    public readonly state:State = {\r\n        playerPoints: []\r\n    }\r\n\r\n    render(): React.ReactNode{\r\n        return(\r\n            <Container>\r\n                <Box pt={5}>\r\n                <Grid container spacing={3}>\r\n                        <Autocomplete\r\n                            options = {this.props.players}\r\n                            getOptionLabel = {(option) => option.name}\r\n                            renderInput = {(params) => \r\n                                <TextField {...params} label=\"Choose a player\" />\r\n                            }\r\n                            filterOptions = {createFilterOptions({\r\n                                limit: 100\r\n                            })}\r\n                            onChange = {this.handlePlayerChange}\r\n                        />\r\n                        {/*<Autocomplete\r\n                            options = {this.props.players}\r\n                            getOptionLabel = {(option) => option.name}\r\n                            renderInput = {(params) => \r\n                                <TextField {...params} label=\"Select a player to compare\" />\r\n                            }\r\n                            filterOptions = {createFilterOptions({\r\n                                limit: 100\r\n                            })}\r\n                        />*/}\r\n                        {this.state.playerPoints.length ? \r\n                            <PlayersChart playerPoints={this.state.playerPoints} /> :\r\n                            <CircularProgress/>\r\n                        }\r\n                </Grid>\r\n                \r\n                </Box>\r\n            </Container>\r\n        )\r\n\r\n    }\r\n    \r\n    private readonly handlePlayerChange = (event: any, newValue: Player|null) =>{\r\n        if(newValue === null){\r\n            this.setState({playerPoints: []})\r\n        }\r\n        else{\r\n            $.getJSON('https://serene-crag-74633.herokuapp.com/tournaments/'+newValue.id)\r\n            .then(res => {\r\n                this.setState({\r\n                    playerPoints: tournamentsService.getPointsByDate(res)\r\n                })\r\n            })\r\n            .catch(() => {\r\n                console.log(\"error\")\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) =>({\r\n    players: state.players\r\n});\r\n\r\nconst Progress = connect(mapStateToProps)(ProgressComponent)\r\nexport {Progress}","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, HashRouter } from 'react-router-dom';\r\nimport { Route } from 'react-router';\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\nimport { Home } from './components/home';\r\nimport playersService, { Player } from './services/player-service';\r\nimport { AnyAction, Dispatch } from 'redux';\r\nimport { updatePlayers } from './store/players/player-actions';\r\nimport { connect } from 'react-redux';\r\nimport $ from \"jquery\";\r\nimport { Progress } from './components/progress';\r\n\r\ntype Props = ReturnType<typeof mapDispatchToProps> \r\n\r\nclass AppComponent extends Component<Props, {}> {\r\n  \r\n  componentDidMount(): void{\r\n    $.ajax('https://serene-crag-74633.herokuapp.com/all')\r\n      .then(res => {\r\n          const players:Player[] =  playersService.parseContent(res)\r\n          this.props.updatePlayers(players)\r\n      })\r\n      .catch(() => {\r\n          console.log(\"error\")\r\n      })\r\n  }\r\n  \r\n  static displayName = AppComponent.name;\r\n  \r\n  render () {\r\n    return (\r\n      <HashRouter>\r\n        <Route exact path='/' component={Home} />\r\n        <Route exact path='/progress' component={Progress} />\r\n      </HashRouter>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<AnyAction>) =>({\r\n  updatePlayers: (players: Player[]) => dispatch(updatePlayers(players))\r\n});\r\n\r\nconst App = connect(null, mapDispatchToProps)(AppComponent)\r\nexport default App","import { Player } from \"../../services/player-service\";\r\nimport { UpdatePlayersAction, UPDATE_PLAYERS } from \"./player-types\";\r\n\r\nexport function updatePlayers(newPlayers: Player[]): UpdatePlayersAction{\r\n    return {\r\n        type: UPDATE_PLAYERS,\r\n        payload: newPlayers\r\n    }\r\n}","import { Player } from \"../../services/player-service\";\r\n\r\nexport const UPDATE_PLAYERS = 'UPDATE_PLAYERS'\r\n\r\nexport interface UpdatePlayersAction {\r\n    type: typeof UPDATE_PLAYERS\r\n    payload: Player[]\r\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { Player } from \"../../services/player-service\";\r\nimport { UpdatePlayersAction, UPDATE_PLAYERS } from \"./player-types\";\r\n\r\nconst initialState: Player[] = []\r\n\r\nexport function playersReducer(\r\n    state = initialState,\r\n    action: UpdatePlayersAction\r\n\r\n): Player[] {\r\n    switch(action.type){\r\n        case UPDATE_PLAYERS:\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}","import { combineReducers } from \"redux\";\r\nimport { playersReducer } from \"./players/player-reducers\";\r\n\r\nconst rootReducer = combineReducers({\r\n    players: playersReducer\r\n})\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport default rootReducer;\r\n","import store from './createStore';\r\n\r\nexport default store;","import { createStore } from 'redux';\r\nimport reducer from './combineReducers';\r\n\r\nexport default createStore(reducer);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}