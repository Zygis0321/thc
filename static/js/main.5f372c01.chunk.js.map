{"version":3,"sources":["components/styles/playerlist.module.css","data/scorecalc-data.ts","services/player-service.ts","components/players-autocomplete.tsx","components/rankedplayers-list.tsx","components/ranker.tsx","store/ranker/ranker-actions.ts","store/ranker/ranker-types.ts","services/tournament-service.ts","services/country-service.ts","components/player-card.tsx","components/players-chart.tsx","components/progress.tsx","components/navbar.tsx","components/home.tsx","App.tsx","store/players/player-actions.ts","store/players/player-types.ts","serviceWorker.ts","store/players/player-reducers.ts","store/ranker/ranker-reducers.ts","store/combineReducers.ts","store/index.ts","store/createStore.ts","index.tsx"],"names":["module","exports","levelList","name","coefficient","winnerpoints","percentageNormalList","tournamentAge","percentage","percentageExceptionList","exceptionInterval","Date","UTC","playersService","rankPlayers","players","prefScores","i","length","lowestScore","newPoints","points","Math","max","score","rank","j","newRank","recalc","level","pos","value","map","p","sort","a","b","valueSum","min","maxScore","round","content","stringArray","split","ln","ret","player","Number","id","club","nation","push","el","document","createElement","innerHTML","list","getElementsByClassName","cnt","ind","indexOf","substr","Array","fill","PlayersAutoComplete","state","searchText","handleSearchChange","e","setState","target","TextField","label","variant","onChange","this","fullWidth","InputProps","endAdornment","InputAdornment","position","Search","color","dense","props","filter","toLowerCase","includes","slice","from","ListItem","key","button","onClick","handlePlayerToggle","ListItemText","primary","secondary","ListItemSecondaryAction","Checkbox","edge","checked","playersCompare","some","Box","pt","pl","pr","Skeleton","width","Component","listItemStyle","boxShadow","backgroundColor","marginTop","marginBottom","borderRadius","mobileListItemStyle","paddingRight","paddingLeft","ratingUpStyle","fontWeight","ratingDownStyle","ratingConstantStyle","SortableItem","SortableElement","children","isTabletOrMobile","useMediaQuery","maxWidth","style","onMouseEnter","body","cursor","onMouseLeave","SortableList","SortableContainer","paddingTop","ResponsiveListItem","undefined","RankedPlayersList","isMobile","onSortStart","onSortEnd","oldIndex","newIndex","reorder","shouldCancelStart","nearestViewportElement","useWindowAsScrollContainer","lockAxis","pressDelay","helperClass","styles","selected","Grid","item","xs","sm","md","minWidth","textAlign","float","index","container","direction","mr","abs","justify","matches","display","alignItems","justifyContent","marginRight","IconButton","size","playerRemoved","Clear","fontSize","RankerComponent","levelName","levelFound","find","updateRankerState","rankerState","arrayMove","selectedLevel","playerAdded","concat","$","ajax","then","res","items","catch","console","log","handleClearAllClick","playerId","handleLevelChange","pb","spacing","bottomNavVal","FormControl","InputLabel","Select","MenuItem","Button","startIcon","ClearAll","Typography","align","BottomNavigation","newValue","bottom","right","left","zIndex","showLabels","BottomNavigationAction","icon","GroupAdd","List","Ranker","connect","ranker","dispatch","type","payload","tournamentsService","addYears","dt","n","dtt","setFullYear","getFullYear","getPointsByDate","tournaments","percentageList","datesToCheck","newDate","date","getTime","best5","best","sum","convertDateToString","toUTCString","getChartData","points01","points02","points03","scalePointsByDate","step","startRange","endRange","startTime","endTime","getMaxDate","getMinDate","getChartDataArray","yearRange","density","playerPoints","playerPointsException","playerPoints1","startDate","endDate","res1","res2","res3","newEl","pop","getChartDataArrayCompare","playerPointsException1","playerPoints2","playerPointsException2","points11","points12","points13","getCountry","countryCodes","country","fifa","alpha2code","a2","PlayerDetail","bold","text","PlayerContent","CardContent","homePage","paddingBottom","withFlag","alignSelf","objectFit","alt","code","margin","ArrowForward","toString","PlayerSkeleton","height","PlayerHomeCard","history","useHistory","Card","CardActionArea","PlayerCard","marginLeft","flexDirection","CardActions","href","flex","PlayersChart","player2Color","player1Color","handleYearChange","event","prevProps","playerPointsNormal1","prevState","getYearRange","getUTCFullYear","playerName1","playerName2","Slider","valueLabelDisplay","aria-labelledby","marks","overflow","data","playerPointsNormal2","strokeDasharray","dataKey","getPayload","stroke","dot","strokeWidth","x","ProgressComponent","playerUpdating","selectedPlayer","handleValueChange","handlePlayerChange","getPlayerPoints","normal","exception","handlePlayerCompareChange","Promise","resolve","reject","getJSON","always","match","params","getPlayerValue","CircularProgress","Autocomplete","blurOnSelect","options","getOptionLabel","option","renderInput","filterOptions","createFilterOptions","limit","loading","top","Progress","navBarItemStyle","buttonSelectedStyle","navList","url","NavBar","opened","toggleDrawer","Drawer","anchor","open","onClose","Divider","component","to","exact","activeStyle","AppBar","Container","React","Home","useState","playerCount","setPlayerCount","useSelector","Whatshot","WebkitTextStroke","WebkitTextStrokeColor","gridGap","gridTemplateColumns","count","skeletons","getSkeletons","AppComponent","parseContent","updatePlayersState","getPlayerScores","path","displayName","App","playersState","Boolean","window","location","hostname","initialState","rootReducer","combineReducers","action","store","createStore","reducer","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.5f372c01.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"selected\":\"playerlist_selected__3NSKn\"};","export interface Level {\r\n    name: string,\r\n    coefficient: number,\r\n    winnerpoints: number\r\n}\r\n\r\nexport const levelList: Level[] = [\r\n    {name: \"Level 1 (World)\", coefficient: 0.96, winnerpoints: 1000},\r\n    {name: \"Level 1 (Continental)\", coefficient: 0.96, winnerpoints: 600},\r\n    {name: \"Level 2\", coefficient: 0.92, winnerpoints: 500},\r\n    {name: \"Level 3\", coefficient: 0.89, winnerpoints: 100},\r\n    {name: \"Level 4\", coefficient: 0.83, winnerpoints: 70},\r\n    {name: \"Level 5\", coefficient: 0.60, winnerpoints: 40},\r\n    {name: \"Level 6\", coefficient: 0.40, winnerpoints: 20},\r\n]\r\n\r\nexport interface PointsPercentage {\r\n    tournamentAge: number,\r\n    percentage: number\r\n}\r\n\r\nexport const percentageNormalList: PointsPercentage[] = [\r\n    {\r\n        tournamentAge: 0,\r\n        percentage: 1\r\n    },\r\n    {\r\n        tournamentAge: 2,\r\n        percentage: 0.8\r\n    },\r\n    {\r\n        tournamentAge: 3,\r\n        percentage: 0.6\r\n    },\r\n    {\r\n        tournamentAge: 4,\r\n        percentage: 0.4\r\n    },\r\n    {\r\n        tournamentAge: 5,\r\n        percentage: 0.2\r\n    },\r\n    {\r\n        tournamentAge: 6,\r\n        percentage: 0\r\n    },\r\n]\r\nexport const percentageExceptionList: PointsPercentage[] = [\r\n    {\r\n        tournamentAge: 0,\r\n        percentage: 1\r\n    },\r\n    {\r\n        tournamentAge: 3,\r\n        percentage: 0.6\r\n    },\r\n    {\r\n        tournamentAge: 4,\r\n        percentage: 0.4\r\n    },\r\n    {\r\n        tournamentAge: 5,\r\n        percentage: 0.2\r\n    },\r\n    {\r\n        tournamentAge: 6,\r\n        percentage: 0\r\n    },\r\n]\r\nexport const exceptionInterval: Date[] = [\r\n    new Date(Date.UTC(2020, 9, 5)),\r\n    new Date(Date.UTC(2021, 6, 1))\r\n]","import { Level } from \"../data/scorecalc-data\";\r\n\r\n\r\nexport interface Player{\r\n    name: string,\r\n    id: string,\r\n    rank: number,\r\n    nation: string,\r\n    points: number,\r\n    value: number\r\n    club: string\r\n}\r\n\r\nexport interface PlayerRanked extends Player{\r\n    pos: number\r\n    lowestScore: number\r\n    score: number\r\n    newRank: number\r\n    newPoints: number\r\n}\r\n\r\nclass PlayersService {\r\n\r\n    //private prefScores:number[] = []\r\n\r\n    rankPlayers = (players: PlayerRanked[], prefScores:number[]): PlayerRanked[] => {\r\n        for(let i=0; i<players.length; i++){\r\n            if(players[i].lowestScore === -1){\r\n                continue\r\n            }\r\n            players[i].newPoints = players[i].points + Math.max(0, players[i].score - players[i].lowestScore)\r\n        }\r\n        for(let i=0; i<players.length; i++){\r\n            if(players[i].lowestScore === -1){\r\n                continue\r\n            }\r\n\r\n            let rank: number = prefScores[players[i].newPoints + 1] + 1\r\n            for(let j=0; j<players.length; j++){\r\n                if(players[j].lowestScore === -1)continue\r\n                if(players[j].points>players[i].newPoints)rank--\r\n                if(players[j].newPoints>players[i].newPoints)rank++\r\n            }\r\n            players[i].rank = prefScores[players[i].points + 1] + 1\r\n            players[i].newRank = rank\r\n        }\r\n\r\n        return players\r\n    }\r\n\r\n    recalc = (players: PlayerRanked[], level: Level): PlayerRanked[] => {\r\n        \r\n        \r\n        //set player pos\r\n        for(var i=0; i<players.length; i++){\r\n            players[i].pos=i+1\r\n            players[i].score=0;\r\n        }\r\n        \r\n        \r\n        if(players.length<4){\r\n            return players;\r\n        }\r\n        \r\n        \r\n        //which player beaten\r\n        var value:number[] = players.map(p => p.value).sort((a,b) => b-a)\r\n        for(let i=0; i+1<players.length; i++){\r\n            let valueSum: number = 0;\r\n            for(var j=i; j<Math.min(i+4, players.length); j++){\r\n                valueSum+=value[j]\r\n            }\r\n            players[i].score = Math.max(players[i].score, (valueSum/4)*level.coefficient);\r\n        }\r\n        //number of beaten\r\n        for(let i=0; i<players.length; i++){\r\n            let maxScore: number = (((70-1)*(players.length - i - 1))/(players.length-1))+1\r\n            players[i].score = Math.max(players[i].score, Math.min(maxScore,players.length-i))\r\n        }\r\n\r\n        //scalar\r\n        let points:number = level.winnerpoints\r\n        for(let i=0; i+1<players.length; i++){\r\n            players[i].score = Math.max(players[i].score, points)\r\n            points/=2\r\n        }\r\n\r\n        //linear\r\n        for(let i=0; i<players.length; i++){\r\n            let score: number = (((level.winnerpoints-1)*(players.length-i-1))/(players.length-1))+1\r\n            players[i].score = Math.max(players[i].score, score)\r\n        }\r\n\r\n        //sum up\r\n        for(let i=0; i<players.length; i++){\r\n            players[i].score = Math.round(players[i].score - 0.05)\r\n        }\r\n        players[0].score+=10\r\n\r\n        return players\r\n    }\r\n\r\n    parseContent(content: string): Player[]{\r\n        const stringArray = content.split('\\n').map((ln) => {\r\n            return ln.split('\\t');\r\n        });\r\n        let ret: Player[] = []\r\n        for(var i=2; i+1<stringArray.length; i++){\r\n            const player:Player = {\r\n                rank: Number(stringArray[i][0]),\r\n                id: stringArray[i][1],\r\n                name: stringArray[i][2],\r\n                club: stringArray[i][3],\r\n                nation: stringArray[i][4],\r\n                points: Number(stringArray[i][5]),\r\n                value: Number(stringArray[i][6]),\r\n            }\r\n            ret.push(player)\r\n        }\r\n        return ret\r\n    }\r\n\r\n    parsePlayerMinPoints(content: string): number{\r\n        var el = document.createElement('html');\r\n        el.innerHTML = content\r\n        var list = el.getElementsByClassName(\"normTour\");\r\n        \r\n        var ret:number = 100000;\r\n        var cnt:number = 0;\r\n        for(var i=6; i<list.length; i+=7){\r\n            let ind:number = list[i].innerHTML.indexOf('(')\r\n            if(ind===-1)ind=list[i].innerHTML.length\r\n            let score:string = list[i].innerHTML.substr(0, ind);\r\n            ret = Math.min(ret, Number(score));\r\n            cnt++\r\n        }\r\n        if(cnt<5)ret=0\r\n        return ret\r\n    }\r\n\r\n    getPlayerScores(players: Player[]): number[]{\r\n        let prefScores:number[] = new Array(6005).fill(0)\r\n        for(let i=0; i<players.length; i++){\r\n            prefScores[players[i].points]++;\r\n        }\r\n        \r\n        for(let i=6000; i>=0; i--){\r\n            prefScores[i]+=prefScores[i+1]\r\n        }\r\n        return prefScores\r\n\r\n    }\r\n\r\n}\r\n\r\nconst playersService = new PlayersService();\r\nexport default playersService","import { Box, Checkbox, InputAdornment, List, ListItem, ListItemSecondaryAction, ListItemText } from '@material-ui/core';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Search } from '@material-ui/icons';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport React, { Component } from 'react';\r\nimport { Player } from '../services/player-service';\r\n//import matchSorter from 'match-sorter'\r\n\r\ninterface OwnProps{\r\n    players: Player[]\r\n    handlePlayerToggle: (player: Player) => void\r\n    playersCompare: Player[]\r\n}\r\ninterface State{\r\n    searchText: string\r\n}\r\n\r\ntype Props = OwnProps\r\n\r\n\r\nexport class PlayersAutoComplete extends Component<Props, State>{\r\n    public readonly state: State = {\r\n        searchText: ''\r\n    }\r\n    render(): React.ReactNode{\r\n\r\n        return(\r\n\r\n            <>\r\n                \r\n\r\n                <TextField \r\n                    label=\"Players\" \r\n                    variant=\"outlined\" \r\n                    onChange={this.handleSearchChange} \r\n                    fullWidth\r\n                    InputProps={{\r\n                        endAdornment: (\r\n                            <InputAdornment position=\"end\">\r\n                                <Search color='action'/>\r\n                            </InputAdornment>\r\n                        )\r\n                    }}\r\n                />\r\n                <List dense>\r\n                    {(!this.props.players.length ? Array.from(new Array(10)) : \r\n                        this.props.players.filter(p => p.name.toLowerCase().includes(this.state.searchText.toLowerCase())).slice(0, 10))\r\n                        .map((player) => {\r\n                            return (\r\n                                player ? (\r\n                                    <ListItem key={player.id} button onClick={() => this.props.handlePlayerToggle(player)}>\r\n                                        <ListItemText id={player.id+player.name} primary={player.name} secondary={player.club} />\r\n                                        <ListItemSecondaryAction>\r\n                                            <Checkbox\r\n                                                edge=\"end\"\r\n                                                onChange={() => this.props.handlePlayerToggle(player)}\r\n                                                checked={this.props.playersCompare.some(p => p.id==player.id)}\r\n                                            />\r\n                                        </ListItemSecondaryAction>\r\n                                    </ListItem>\r\n                                ) : (\r\n                                    <Box pt={2} pl={1} pr={1}>\r\n                                        <Skeleton />\r\n                                        <Skeleton width=\"60%\" />\r\n                                    </Box>\r\n                                )\r\n                            )\r\n                        })}\r\n                </List>\r\n            </>\r\n        )\r\n    }\r\n    private readonly handleSearchChange = (e: any): void => {\r\n        this.setState({searchText: e.target.value});\r\n    }\r\n}","import { Box, Grid, IconButton, List, ListItem, ListItemText } from \"@material-ui/core\";\r\nimport { Clear } from \"@material-ui/icons\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport CSS from 'csstype';\r\nimport React, { Component } from \"react\";\r\nimport MediaQuery, { useMediaQuery } from 'react-responsive';\r\nimport { SortableContainer, SortableElement } from \"react-sortable-hoc\";\r\nimport { PlayerRanked } from \"../services/player-service\";\r\nimport styles from './styles/playerlist.module.css';\r\n\r\nconst listItemStyle: CSS.Properties = {\r\n    boxShadow: '0 2px 4px 0 rgba(0, 0, 0, 0.2)',\r\n    backgroundColor: 'rgb(255, 255, 255)',\r\n    marginTop: '10px',\r\n    marginBottom: '10px',\r\n    borderRadius: '7px'\r\n}\r\n\r\nconst mobileListItemStyle: CSS.Properties = {\r\n    ...listItemStyle,\r\n    paddingRight: '5px',\r\n    paddingLeft: '10px'\r\n}\r\n\r\nconst ratingUpStyle: CSS.Properties = {\r\n    fontWeight: 600,\r\n    color: '#5eb560'\r\n}\r\nconst ratingDownStyle: CSS.Properties = {\r\n    fontWeight: 600,\r\n    color: '#f97373'\r\n}\r\nconst ratingConstantStyle: CSS.Properties = {\r\n    fontWeight: 600,\r\n    color: '#969696'\r\n}\r\n\r\nconst tabletMaxWidth = 800\r\n\r\nconst SortableItem = SortableElement(({children}:any) => { \r\n    const isTabletOrMobile = useMediaQuery({ maxWidth: tabletMaxWidth })\r\n    return(\r\n        <ListItem \r\n        \r\n            style={isTabletOrMobile ? mobileListItemStyle : listItemStyle}\r\n            onMouseEnter={ (): void => { if (document.body.style.cursor !== 'grabbing') document.body.style.cursor = 'grab' } }\r\n            onMouseLeave={ (): void => { if (document.body.style.cursor === 'grab') document.body.style.cursor = '' } }\r\n        >\r\n            {children}\r\n        </ListItem>\r\n        )\r\n    });\r\n    \r\nconst SortableList = SortableContainer(({children}:any) => {\r\n    const isTabletOrMobile = useMediaQuery({ maxWidth: tabletMaxWidth })\r\n    return <List dense={isTabletOrMobile} style={{paddingTop:0}}>{children}</List>;\r\n});\r\nconst ResponsiveListItem = ({children}:any) => {\r\n    const isTabletOrMobile = useMediaQuery({ maxWidth: tabletMaxWidth })\r\n    return <ListItem style={isTabletOrMobile ? {paddingRight:'5px', paddingLeft:'10px'}:undefined}>{children}</ListItem>\r\n}\r\n\r\n\r\ninterface OwnProps{\r\n    playersCompare: PlayerRanked[] \r\n    reorder: ({oldIndex, newIndex}: any) => void\r\n    playerRemoved: (playerId: string) => void\r\n}\r\n\r\ntype Props = OwnProps\r\n\r\n\r\nexport class RankedPlayersList extends Component<Props, {}>{\r\n    \r\n    render(): React.ReactNode{\r\n        return(\r\n            <MediaQuery maxWidth={599}>\r\n            {(isMobile) => \r\n            <SortableList \r\n                onSortStart={() => (document.body.style.cursor = 'grabbing')}\r\n                onSortEnd={({oldIndex, newIndex}: any) => {\r\n                    document.body.style.cursor = 'default'\r\n                    this.props.reorder({oldIndex, newIndex})\r\n                }} \r\n                shouldCancelStart = {(e: any) => {\r\n                    if(\r\n                        e.target.id == \"buttonRemove\" || \r\n                        e.target.nearestViewportElement !== undefined && \r\n                        e.target.nearestViewportElement.id === \"buttonRemove\"\r\n                    ){\r\n                        return true\r\n                    }\r\n                }} \r\n                useWindowAsScrollContainer\r\n                lockAxis = 'y'\r\n                pressDelay = {isMobile ? 200 : 0}\r\n                helperClass = {styles.selected}\r\n            >\r\n                <ResponsiveListItem>\r\n                    <Grid item xs = {1}>\r\n                        <ListItemText >#</ListItemText>\r\n                    </Grid>\r\n                    <Grid item xs={3} sm={4}>\r\n                        <ListItemText>Name</ListItemText>\r\n\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                        <ListItemText>Rank</ListItemText>\r\n\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                        <ListItemText >Points</ListItemText>\r\n\r\n                    </Grid>\r\n                    <Grid item xs={2} sm={2} md={2} style={{minWidth: '65px'}}>  \r\n                        <ListItemText style={{textAlign:'right', float:'right'}}>Tournament Points</ListItemText>\r\n                    </Grid>\r\n                </ResponsiveListItem>\r\n                {this.props.playersCompare.map((value, index) => (\r\n                <SortableItem key={index} index={index} >\r\n                    <Grid item xs = {1}>\r\n                    <ListItemText><b>{value.pos}</b></ListItemText>\r\n\r\n                    </Grid>\r\n                    <Grid item xs={3} sm={4}>\r\n                        <ListItemText>{value.name}</ListItemText>\r\n\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                        {\r\n                            value.lowestScore===-1 ? <Skeleton width={65}/> :(\r\n                            <Grid container direction='row' >\r\n                                <Box mr={0.5}><ListItemText>{value.newRank}</ListItemText></Box>\r\n                                {\r\n                                    value.rank > value.newRank ? <ListItemText style={ratingUpStyle}><b>{`(+${Math.abs(value.rank-value.newRank)})`}</b></ListItemText>:\r\n                                    value.rank === value.newRank ? <ListItemText style={ratingConstantStyle}><b>{`(=${value.rank-value.newRank})`}</b></ListItemText> :\r\n                                    <ListItemText style={ratingDownStyle}><b>{`(-${Math.abs(value.rank-value.newRank)})`}</b></ListItemText>\r\n                                } \r\n                            </Grid>\r\n                            )\r\n                        }\r\n\r\n                    </Grid>\r\n\r\n                    <Grid item xs>\r\n                        {\r\n                            value.lowestScore===-1 ? <Skeleton width={65}/> :(\r\n                                <Grid container direction='row' >\r\n                                    <Box mr={0.5}><ListItemText >{value.newPoints}</ListItemText></Box>\r\n                                    {\r\n                                        value.points < value.newPoints ? <ListItemText style={ratingUpStyle}><b>{`(+${Math.abs(value.points-value.newPoints)})`}</b></ListItemText>:\r\n                                        <ListItemText style={ratingConstantStyle}><b> {`(=${value.points-value.newPoints})`}</b></ListItemText> \r\n                                    } \r\n                                </Grid>\r\n                                )\r\n                        }\r\n                        \r\n\r\n                    </Grid>\r\n                      <Grid item xs={2} sm={2}  style={{minWidth: '65px'}}>  \r\n                         <Grid container direction='row' justify='flex-end' > \r\n                            <MediaQuery maxWidth={tabletMaxWidth}>\r\n                                {(matches) => \r\n                                    matches ? \r\n                                    <>\r\n                                        <Box  display=\"flex\" alignItems=\"center\" justifyContent=\"flex-end\" marginRight='2px' >\r\n                                            <ListItemText  ><b>{value.score}</b></ListItemText>\r\n                                        </Box>\r\n                                        <IconButton size='small' onClick = {() => this.props.playerRemoved(value.id)} id=\"buttonRemove\">\r\n                                            <Clear fontSize='small' id=\"buttonRemove\"/>\r\n                                        </IconButton>\r\n                                        </>\r\n                                    :\r\n                                    <>\r\n                                        <Box  display=\"flex\" alignItems=\"center\" justifyContent=\"flex-end\" marginRight={2} >\r\n                                            <ListItemText  ><b>{value.score}</b></ListItemText>\r\n                                        </Box>\r\n                                        <IconButton size='small' onClick = {() => this.props.playerRemoved(value.id)} id=\"buttonRemove\">\r\n                                            <Clear id=\"buttonRemove\"/>\r\n                                        </IconButton>\r\n                                    </>\r\n                                    \r\n                                }\r\n                            </MediaQuery>\r\n                         </Grid> \r\n                     </Grid> \r\n                </SortableItem>\r\n                ))}\r\n            </SortableList>\r\n            }\r\n            </MediaQuery>\r\n        )\r\n    }\r\n\r\n}","import { BottomNavigation, BottomNavigationAction, Box, Button, Divider, FormControl, Grid, InputLabel, MenuItem, Select, Typography } from '@material-ui/core';\r\nimport { ClearAll, GroupAdd, List as ListIcon } from '@material-ui/icons';\r\nimport arrayMove from 'array-move';\r\nimport $ from \"jquery\";\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport MediaQuery from 'react-responsive';\r\nimport { AnyAction, Dispatch } from 'redux';\r\nimport { Level, levelList } from '../data/scorecalc-data';\r\nimport playersService, { Player, PlayerRanked } from '../services/player-service';\r\nimport { RootState } from '../store/combineReducers';\r\nimport { updateRankerState } from '../store/ranker/ranker-actions';\r\nimport { RankerState } from '../store/ranker/ranker-types';\r\nimport { PlayersAutoComplete } from './players-autocomplete';\r\nimport { RankedPlayersList } from './rankedplayers-list';\r\n\r\n\r\n\r\n\r\ntype Props = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps> \r\n\r\nexport class RankerComponent extends Component<Props, {}>{ \r\n    \r\n    private readonly recalc = (players: PlayerRanked[], levelName: string): PlayerRanked[] => {\r\n        let levelFound = levelList.find(level => level.name==levelName)\r\n        let level:Level = levelFound ? levelFound : levelList[0]\r\n        return playersService.rankPlayers(playersService.recalc(players, level), this.props.prefScores);\r\n    }\r\n\r\n    private readonly reorder = ({oldIndex, newIndex}: any): void => {\r\n        this.props.updateRankerState({\r\n            ...this.props.rankerState, \r\n            playersCompare: this.recalc(arrayMove(this.props.rankerState.playersCompare, oldIndex, newIndex), this.props.rankerState.selectedLevel)\r\n        })\r\n      };\r\n\r\n    render(): React.ReactNode{\r\n        return(\r\n            <>\r\n                <MediaQuery maxWidth={599}>\r\n                {(isMobile) => \r\n                <Box pb={isMobile ? 6 : 2}>\r\n                    <Grid container spacing={3}>\r\n                            <>\r\n                            {(!isMobile || this.props.rankerState.bottomNavVal === 0) &&\r\n                            <Grid item xs={12}  sm={3} style={{minWidth:'200px'}}>\r\n                                <PlayersAutoComplete\r\n                                    players = {this.props.players}\r\n                                    handlePlayerToggle = {this.handlePlayerToggle}\r\n                                    playersCompare = {this.props.rankerState.playersCompare}\r\n                                />\r\n                            </Grid>\r\n                            }\r\n                        \r\n                            {(!isMobile || this.props.rankerState.bottomNavVal === 1) &&\r\n                                <Grid item xs={12} sm>\r\n                                    <Grid container justify='space-between' alignItems='center'>\r\n                                        <Grid item>\r\n                                        <FormControl>\r\n                                            <InputLabel>Level</InputLabel>\r\n                                            <Select\r\n                                                value={this.props.rankerState.selectedLevel}\r\n                                                onChange={this.handleLevelChange}\r\n                                            >\r\n                                                {levelList.map(level => <MenuItem value={level.name}>{level.name}</MenuItem> )}\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            color=\"secondary\"\r\n                                            startIcon={<ClearAll />}\r\n                                            onClick={this.handleClearAllClick}\r\n                                            style={{float:'right'}}\r\n                                        >\r\n                                            Clear\r\n                                        </Button>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                    <Typography align='right' variant='body2'style={{marginTop:20, marginRight:10}} color=\"textSecondary\">\r\n                                        <i>{isMobile ? \"*Hold and drag to reorder\" :\r\n                                            \"*Drag to reorder\"}</i>\r\n                                    </Typography>\r\n                                    <RankedPlayersList\r\n                                        playersCompare = {this.props.rankerState.playersCompare}\r\n                                        reorder = {this.reorder}\r\n                                        playerRemoved = {this.playerRemoved}\r\n                                    />\r\n                                </Grid>\r\n                            \r\n                            }\r\n                            \r\n                        </>\r\n                    </Grid>\r\n                </Box>\r\n                }\r\n            \r\n                </MediaQuery>\r\n            <MediaQuery maxWidth={599}>\r\n                <BottomNavigation\r\n                    value = {this.props.rankerState.bottomNavVal}\r\n                    onChange={(e, newValue) => {\r\n                        this.props.updateRankerState({\r\n                            ...this.props.rankerState,\r\n                            bottomNavVal: newValue\r\n                        })\r\n                    }}\r\n                    style = {{\r\n                        width:'100%',\r\n                        position: 'fixed',\r\n                        bottom: '0',\r\n                        right:'0',\r\n                        left:'0',\r\n                        boxShadow: '0 0px 3px 0px rgb(150, 150, 150)',\r\n                        zIndex: 99999\r\n                    }}\r\n                    showLabels\r\n                >\r\n                    <BottomNavigationAction label=\"Select Players\" style={{maxWidth:'1000px'}} icon={<GroupAdd/>}/>\r\n                    <BottomNavigationAction label=\"Standings\" style={{maxWidth:\"1000px\"}} icon={<ListIcon/>}/>\r\n                </BottomNavigation>\r\n            </MediaQuery>\r\n            </>\r\n        )\r\n    }\r\n\r\n    private readonly handlePlayerToggle = (player: Player): void => {\r\n        if(this.props.rankerState.playersCompare.some(p => p.id==player.id)){\r\n            this.playerRemoved(player.id)\r\n        }\r\n        else{\r\n            this.playerAdded(player);\r\n        }\r\n    }\r\n    private readonly playerAdded = (player: Player): void => {\r\n        \r\n        this.props.updateRankerState({\r\n            ...this.props.rankerState,\r\n            playersCompare: this.recalc(this.props.rankerState.playersCompare.concat({\r\n                ...player, \r\n                pos:this.props.rankerState.playersCompare.length+1, \r\n                score:-1, \r\n                lowestScore:-1,\r\n                newRank:-1,\r\n                newPoints:-1\r\n            }), this.props.rankerState.selectedLevel)\r\n        })\r\n        $.ajax('https://serene-crag-74633.herokuapp.com/single/'+player.id)\r\n        .then(res => {\r\n            \r\n            let score = Number(res);\r\n            let items = [...this.props.rankerState.playersCompare]\r\n            for(var i=0; i<items.length; i++){\r\n                if(items[i].id === player.id && items[i].lowestScore===-1){\r\n                    let item = {...items[i]}\r\n                    item.lowestScore=score\r\n                    \r\n                    items[i]=item\r\n                    this.props.updateRankerState({\r\n                        ...this.props.rankerState,\r\n                        playersCompare: this.recalc(items, this.props.rankerState.selectedLevel)\r\n                    })\r\n\r\n                    break\r\n                }\r\n            }\r\n        \r\n        })\r\n        .catch(() => {\r\n            console.log(\"error\")\r\n        })\r\n\r\n    }\r\n    private readonly handleClearAllClick = (): void => {\r\n        this.props.updateRankerState({\r\n            ...this.props.rankerState,\r\n            playersCompare: []\r\n        })\r\n    }\r\n    private readonly playerRemoved = (playerId: string): void => {\r\n        this.props.updateRankerState({\r\n            ...this.props.rankerState,\r\n            playersCompare: this.recalc(this.props.rankerState.playersCompare.filter(player => player.id !== playerId), this.props.rankerState.selectedLevel)\r\n        })\r\n    }\r\n    private readonly handleLevelChange = (e: any): void => {\r\n        this.props.updateRankerState({\r\n            ...this.props.rankerState,\r\n            selectedLevel: e.target.value,\r\n            playersCompare: this.recalc(this.props.rankerState.playersCompare, e.target.value)\r\n        })\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) =>({\r\n    players: state.players.players,\r\n    prefScores: state.players.prefScores,\r\n    rankerState: state.ranker\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<AnyAction>) =>({\r\n    updateRankerState: (rankerState: RankerState) => dispatch(updateRankerState(rankerState))\r\n});\r\n  \r\n\r\nconst Ranker = connect(mapStateToProps, mapDispatchToProps)(RankerComponent)\r\nexport { Ranker };\r\n","import { RankerActionTypes, RankerState, UPDATE_RANKER_STATE } from \"./ranker-types\";\r\n\r\nexport function updateRankerState(rankerState: RankerState): RankerActionTypes{\r\n    return{\r\n        type: UPDATE_RANKER_STATE,\r\n        payload: rankerState\r\n    }\r\n}","import { PlayerRanked } from \"../../services/player-service\";\r\n\r\nexport const UPDATE_RANKER_STATE = 'UPDATE_RANKER_STATE'\r\n\r\nexport interface RankerState {\r\n    playersCompare: PlayerRanked[] \r\n    selectedLevel: string,\r\n    bottomNavVal: number\r\n}\r\n\r\ninterface UpdateRankerStateAction {\r\n    type: typeof UPDATE_RANKER_STATE\r\n    payload: RankerState\r\n}\r\n\r\nexport type RankerActionTypes = \r\n    | UpdateRankerStateAction","import {  exceptionInterval, PointsPercentage } from \"../data/scorecalc-data\";\r\nimport { Player } from \"./player-service\";\r\n\r\nexport interface Tournament{\r\n    date: Date,\r\n    name: string,\r\n    series: string[],\r\n    city: string,\r\n    pos: number,\r\n    points: number\r\n}\r\n\r\nexport interface PlayerWithTournaments extends Player{\r\n    tournaments: PointsByDate[]\r\n}\r\n\r\nexport interface PointsByDate {\r\n    date: Date,\r\n    points: number\r\n}\r\n\r\ninterface PointsByDatePrecalc extends PointsByDate {\r\n    ind: number\r\n}\r\n\r\nexport interface ChartData {\r\n    date: string,\r\n    points01?: number,\r\n    points02?: number,\r\n    points03?: number,\r\n    points11?: number,\r\n    points12?: number,\r\n    points13?: number,\r\n}\r\n\r\nclass TournamentsService {\r\n\r\n    private readonly addYears = (dt: Date, n: number): Date => {\r\n        let dtt = new Date(dt)\r\n        return new Date(dtt.setFullYear(dtt.getFullYear() + n))\r\n    }\r\n\r\n    getPointsByDate = (tournaments: Tournament[], percentageList: PointsPercentage[]): PointsByDate[] => {\r\n        \r\n        let datesToCheck: PointsByDatePrecalc[] = []\r\n        for(let i=0; i<tournaments.length; i++) {\r\n            for(let percentage of percentageList){\r\n                let newDate: Date = this.addYears(tournaments[i].date, percentage.tournamentAge)\r\n\r\n                datesToCheck.push({\r\n                    date: newDate,\r\n                    points: Math.round(tournaments[i].points * percentage.percentage),\r\n                    ind: i\r\n                })\r\n\r\n            }\r\n        }\r\n\r\n        datesToCheck = datesToCheck.sort((a, b) => {\r\n            return new Date(a.date).getTime() - new Date(b.date).getTime()\r\n        })\r\n        \r\n        let best5: PointsByDatePrecalc[] = []\r\n        let ret:PointsByDate[] = []\r\n\r\n        for(let date of datesToCheck){\r\n            best5 = best5.filter((best) => best.ind !== date.ind)\r\n            best5.push(date)\r\n            best5 = best5.sort((a, b) => b.points - a.points)\r\n            let sum = 0\r\n\r\n            for(let i=0; i< Math.min(best5.length, 5); i++){\r\n                sum += best5[i].points;\r\n            }\r\n            ret.push({\r\n                date: date.date,\r\n                points: sum\r\n            })\r\n        }\r\n\r\n\r\n        return ret\r\n    }\r\n\r\n    convertDateToString = (date: Date): string  => {\r\n        return date.toUTCString().slice(5, 16);\r\n    }\r\n\r\n    getChartData = (date: number, score: number, type: number): ChartData => {\r\n        if(type==0){\r\n            return{\r\n                date: this.convertDateToString(new Date(date)),\r\n                points01: score\r\n            }\r\n        }\r\n        else if(type==1){\r\n            return{\r\n                date: this.convertDateToString(new Date(date)),\r\n                points02: score\r\n            }\r\n        }\r\n        else {\r\n            return{\r\n                date: this.convertDateToString(new Date(date)),\r\n                points03: score\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    scalePointsByDate = (points: PointsByDate[], step: number, startRange: Date, endRange: Date, type: number): ChartData[] => {\r\n        let startTime = startRange.getTime();\r\n        let endTime = endRange.getTime();\r\n\r\n        let ind = 0\r\n        let score = 0\r\n        let ret:ChartData[] = []\r\n        for(let i=startTime; i<endTime; i+=step){\r\n            while(ind < points.length && points[ind].date.getTime() <= i){\r\n                score = points[ind].points\r\n                ind++\r\n            }\r\n            ret.push(this.getChartData(i, score, type))\r\n        }\r\n        while(ind < points.length && points[ind].date.getTime() <= endTime){\r\n            score = points[ind].points\r\n            ind++\r\n        }\r\n        ret.push(this.getChartData(endTime, score, type))\r\n        return ret\r\n    }\r\n\r\n\r\n    getMaxDate = (a: Date, b:Date): Date=>{\r\n        if(a>b)return a\r\n        return b\r\n    }\r\n    getMinDate = (a: Date, b:Date): Date => {\r\n        if(a<b)return a\r\n        return b\r\n    }\r\n\r\n    getChartDataArray = (\r\n        yearRange: number[], \r\n        density: number, \r\n        playerPoints:PointsByDate[], \r\n        playerPointsException: PointsByDate[],\r\n        playerPoints1:PointsByDate[]\r\n    ): ChartData[] => {\r\n\r\n\r\n        let startDate: Date = this.getMaxDate(\r\n            new Date(Date.UTC(yearRange[0], 0)), \r\n            playerPoints1[0].date\r\n        )\r\n        let endDate: Date = this.getMinDate(\r\n            new Date(Date.UTC(yearRange[1], 0)), \r\n            playerPoints1[playerPoints1.length - 1].date\r\n        )\r\n        let step: number = (endDate.getTime() - startDate.getTime()) / density\r\n\r\n        let res1: ChartData[] = startDate < exceptionInterval[0] ? \r\n        this.scalePointsByDate(\r\n            playerPoints,\r\n            step, \r\n            startDate, \r\n            this.getMinDate( exceptionInterval[0], endDate),\r\n            0\r\n        ) : []\r\n        let res2: ChartData[] = endDate > exceptionInterval[0] && startDate < exceptionInterval[1]  ? \r\n        this.scalePointsByDate(\r\n            playerPointsException,\r\n            step, \r\n            this.getMaxDate(exceptionInterval[0], startDate), \r\n            this.getMinDate(exceptionInterval[1], endDate),\r\n            1\r\n        ) : []\r\n        let res3: ChartData[] = endDate > exceptionInterval[1] ? \r\n        this.scalePointsByDate(\r\n            playerPoints,\r\n            step, \r\n            this.getMaxDate(startDate, exceptionInterval[1]),\r\n            endDate,\r\n            2\r\n        ) : []\r\n\r\n        if(res1.length && res2.length && res1[res1.length - 1].date === res2[0].date){\r\n            let newEl: ChartData = {\r\n                date: res2[0].date,\r\n                points01: res1[res1.length - 1].points01,\r\n                points02: res2[0].points02\r\n            }\r\n            \r\n            res1.pop()\r\n            res2[0] = newEl\r\n        }\r\n        if(res2.length && res3.length && res2[res2.length - 1].date === res3[0].date){\r\n            let newEl: ChartData = {\r\n                date: res3[0].date,\r\n                points02: res2[res2.length - 1].points02,\r\n                points03: res3[0].points03\r\n            }\r\n            \r\n            res2.pop()\r\n            res3[0] = newEl\r\n        }\r\n        return res1.concat(res2.concat(res3));\r\n    }\r\n    getChartDataArrayCompare = (\r\n        yearRange: number[], \r\n        density: number, \r\n        playerPoints1:PointsByDate[], \r\n        playerPointsException1: PointsByDate[],\r\n        playerPoints2:PointsByDate[], \r\n        playerPointsException2: PointsByDate[]\r\n    ): ChartData[] => {\r\n        let res1: ChartData[] = this.getChartDataArray(\r\n            yearRange,\r\n            density, \r\n            playerPoints1, \r\n            playerPointsException1,\r\n            playerPoints1\r\n        )\r\n        let res2: ChartData[] = this.getChartDataArray(\r\n            yearRange,\r\n            density, \r\n            playerPoints2, \r\n            playerPointsException2,\r\n            playerPoints1\r\n        )\r\n        let ind = 0\r\n        for(let i=0; i<res1.length; i++){\r\n            if(ind < res2.length && res1[i].date === res2[ind].date){\r\n                res1[i].points11 = res2[ind].points01 \r\n                res1[i].points12 = res2[ind].points02 \r\n                res1[i].points13 = res2[ind].points03\r\n                \r\n                ind++            \r\n            }\r\n\r\n        }\r\n        return res1\r\n\r\n    }\r\n}\r\n\r\nconst tournamentsService = new TournamentsService();\r\nexport default tournamentsService","import countryCodes from '../data/countryCodes.json'\r\n\r\nexport interface CountryCode{\r\n    name: string; \r\n    alpha2code: string;\r\n}\r\n\r\nexport function getCountry(nation: string): CountryCode{\r\n    let ret = countryCodes.find(country => country.fifa===nation)\r\n    if(ret===undefined){\r\n        return {\r\n            name:\"Not Found\",\r\n            alpha2code:\"_empty\",\r\n        }\r\n    }\r\n    return {\r\n        name: ret.name,\r\n        alpha2code: ret.a2\r\n    }\r\n}","import { Button, CardActionArea, CardActions, CardContent, IconButton, Typography } from \"@material-ui/core\";\r\nimport Card from '@material-ui/core/Card';\r\nimport { ArrowForward } from \"@material-ui/icons\";\r\nimport { Skeleton } from \"@material-ui/lab\";\r\nimport React from \"react\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport { useHistory } from \"react-router\";\r\nimport { getCountry } from \"../services/country-service\";\r\nimport { Player } from \"../services/player-service\";\r\nimport Flag from 'react-world-flags'\r\n\r\ninterface OwnProps{\r\n    player: Player | null\r\n}\r\n\r\ntype Props = OwnProps\r\n\r\n\r\nfunction PlayerDetail(props: {text: string, value: string, bold?: boolean}){\r\n    return (\r\n        <>\r\n            <Typography align='right' style={{float:'right'}}>\r\n                {props.bold === true ? <b>{props.value}</b> : props.value}\r\n            </Typography>\r\n            <Typography color=\"textSecondary\">\r\n                {props.text}\r\n            </Typography>\r\n        </>\r\n    )\r\n}\r\n\r\nfunction PlayerContent(props: {player: Player, withFlag:boolean, homePage?:boolean}){\r\n    return(\r\n        <CardContent style={props.homePage===true ? undefined :{paddingBottom:4}}>\r\n            <div style={{display:'flex', marginBottom: props.homePage===true ? '0px':'12px'}}>\r\n                {props.withFlag && <Flag \r\n                    style={{alignSelf:'center', marginRight:'12px',width: props.homePage===true ? '60px':'90px',objectFit:'fill', boxShadow: '0 0px 3px 0px rgb(150, 150, 150)',}}\r\n                    alt = {getCountry(props.player.nation).name}\r\n                    code={getCountry(props.player.nation).alpha2code.toLowerCase()}\r\n                />}\r\n                <Typography variant={props.homePage===true ? 'h6' : \"h5\"} align='center' style = {{margin:'auto'}} color={props.homePage===true?'textPrimary':\"secondary\"}>\r\n                    {props.player.name}\r\n                </Typography>\r\n                {props.homePage===true &&\r\n                    <IconButton >\r\n                        <ArrowForward fontSize='large'/>\r\n                    </IconButton>\r\n                }\r\n            </div>\r\n            {props.homePage!==true &&\r\n                <>\r\n                    <PlayerDetail text='Club' value={props.player.club} />\r\n                    <PlayerDetail text='Rank' value={props.player.rank.toString()} bold/>\r\n                    <PlayerDetail text='Points' value={props.player.points.toString()} bold/>\r\n                    <PlayerDetail text='Player Value' value={props.player.value.toString()}/>\r\n                </>\r\n            }\r\n            \r\n        </CardContent>\r\n    )\r\n}\r\nfunction PlayerSkeleton(){\r\n    return(\r\n        <CardContent >\r\n            <div style={{display:'flex'}}>\r\n                <div style={{alignSelf:'center'}}><Skeleton variant='rect' width={60} height={40} /></div>\r\n                <div style={{margin:'auto'}}><Skeleton variant='text' width='120px' height={30}/></div>\r\n                <div style={{alignSelf:'center'}}><IconButton><ArrowForward fontSize='large'/></IconButton></div>\r\n            </div>\r\n            \r\n        </CardContent>\r\n    )\r\n}\r\n\r\n\r\nexport function PlayerHomeCard(props: {player?: Player}){\r\n    let history = useHistory()\r\n    function PlayerClicked(playerId?: string){\r\n        if(playerId==undefined)return\r\n        history.push(`/players/${playerId}`)\r\n    }\r\n    return(\r\n        <Card style = {{width:'100%', height:'100%'}}>\r\n            <CardActionArea onClick={() => PlayerClicked(props.player?.id)} >\r\n                {\r\n                    props.player === undefined ? <PlayerSkeleton/> :\r\n                    <PlayerContent player={props.player} withFlag homePage/>\r\n                }\r\n            </CardActionArea>\r\n        </Card>\r\n\r\n    )\r\n}\r\n\r\nexport default function PlayerCard(props: Props){\r\n    const isMobile = useMediaQuery({maxWidth: 959});\r\n    return (\r\n        props.player === null ?\r\n        <Card style = {{ display:'flex', height: '230px', width:'100%', maxWidth:'650px', marginLeft:'auto', marginRight:'auto'}}>\r\n            <Typography style={{margin:'auto'}}>\r\n                No player selected\r\n            </Typography>\r\n        </Card>\r\n        :\r\n        <Card style = {{display:'flex',justifyContent:'flex-end', alignItems:'stretch',  maxWidth:'650px', marginLeft:'auto', marginRight:'auto', width:'100%'}}>\r\n                \r\n                    <div style={{display:'flex', flexDirection:'column', justifyContent:'space-between', width:'100%'}}>\r\n                        <PlayerContent player={props.player} withFlag={isMobile} />\r\n                        <CardActions>\r\n                            <Button \r\n                                size=\"small\" \r\n                                color=\"primary\"\r\n                                href =  {`https://stiga.trefik.cz/ithf/ranking/player.aspx?ID=${props.player.id}`}\r\n                                target = '_blank'\r\n                            >\r\n                                Learn More\r\n                            </Button>\r\n                        </CardActions>\r\n                    </div>\r\n            {!isMobile && <Flag \r\n                style={{width:'345px', flex:'0 0 345px', boxShadow: '0 0px 3px 0px rgb(150, 150, 150)',}}\r\n                alt = {getCountry(props.player.nation).name}\r\n                code={getCountry(props.player.nation).alpha2code.toLowerCase()}\r\n            />}\r\n        </Card>\r\n    )\r\n}","import { Slider, Typography } from \"@material-ui/core\";\r\nimport React, { Component } from \"react\";\r\nimport MediaQuery from \"react-responsive\";\r\nimport { CartesianGrid, Legend, LegendPayload, Line, LineChart, ReferenceLine, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\r\nimport { exceptionInterval } from \"../data/scorecalc-data\";\r\nimport tournamentsService, { PointsByDate } from \"../services/tournament-service\";\r\n\r\ninterface OwnProps{\r\n    playerPointsNormal1: PointsByDate[]\r\n    playerPointsException1: PointsByDate[]\r\n    playerPointsNormal2: PointsByDate[]\r\n    playerPointsException2: PointsByDate[]\r\n    playerName1?: string\r\n    playerName2?: string\r\n}\r\n\r\ntype Props = OwnProps\r\n\r\ninterface State{\r\n    yearRange: number[]\r\n}\r\n\r\n\r\nexport class PlayersChart extends Component<Props, State>{\r\n\r\n    public readonly state:State = {\r\n        yearRange: [2000, 2027],\r\n    }\r\n\r\n    public readonly player2Color: string = \"#8884d8\"\r\n    public readonly player1Color: string = \"#0004d8\"\r\n\r\n    componentDidUpdate(prevProps: Props){\r\n        if(prevProps.playerPointsNormal1 !== this.props.playerPointsNormal1){\r\n            this.setState((prevState) => ({\r\n                yearRange: [\r\n                    Math.min(this.getYearRange()[1], Math.max(this.getYearRange()[0], prevState.yearRange[0])),\r\n                    Math.max(this.getYearRange()[0], Math.min(this.getYearRange()[1], prevState.yearRange[1]))\r\n                ]\r\n            }));\r\n        }\r\n    }\r\n\r\n    getYearRange(): number[]{\r\n        if(this.props.playerPointsNormal1.length === 0){\r\n            return [2000, 2027]\r\n        }\r\n        return [\r\n            this.props.playerPointsNormal1[0].date.getUTCFullYear(),\r\n            this.props.playerPointsNormal1[this.props.playerPointsNormal1.length-1].date.getUTCFullYear() + 1,\r\n        ]\r\n    }\r\n    \r\n    \r\n    getPayload(): LegendPayload[]{\r\n        let ret:LegendPayload[] = []\r\n        if(this.props.playerName1 !== undefined){\r\n            ret.push({\r\n                value: this.props.playerName1,\r\n                type: \"line\",\r\n                id:\"points01\",\r\n                color: this.player1Color\r\n            })\r\n        }\r\n        if(this.props.playerName2 !== undefined){\r\n            ret.push({\r\n                value: this.props.playerName2,\r\n                type: \"line\",\r\n                id:\"points02\",\r\n                color: this.player2Color\r\n            })\r\n        }\r\n        return ret\r\n    }\r\n\r\n    render(): React.ReactNode{\r\n\r\n        return(\r\n            <>\r\n                <div style={{paddingLeft:'10px', paddingRight:'10px'}}>\r\n                <Typography>\r\n                    Year Range\r\n                </Typography>\r\n                <Slider\r\n                    color = \"secondary\"\r\n                    value = {this.state.yearRange}\r\n                    onChange={this.handleYearChange}\r\n                    valueLabelDisplay=\"auto\"\r\n                    aria-labelledby=\"range-slider\"\r\n                    marks\r\n                    step = {1}\r\n                    min = {this.getYearRange()[0]}\r\n                    max = {this.getYearRange()[1]}\r\n                />\r\n                </div>\r\n                <MediaQuery maxWidth='599px'>{\r\n                    (isMobile) =>\r\n                <div style={{ width: '100%', height: isMobile ? 350:500, overflow:'hidden' }}>\r\n                    <ResponsiveContainer>\r\n                        {this.props.playerPointsNormal1.length ?\r\n\r\n                        <LineChart\r\n                            data={ this.props.playerPointsNormal2.length === 0 ? \r\n                                tournamentsService.getChartDataArray(\r\n                                    this.state.yearRange, \r\n                                    isMobile ? 20 : 40, \r\n                                    this.props.playerPointsNormal1, \r\n                                    this.props.playerPointsException1,\r\n                                    this.props.playerPointsNormal1) :\r\n                                tournamentsService.getChartDataArrayCompare(\r\n                                    this.state.yearRange, \r\n                                    isMobile ? 20 : 40,\r\n                                    this.props.playerPointsNormal1, \r\n                                    this.props.playerPointsException1, \r\n                                    this.props.playerPointsNormal2, \r\n                                    this.props.playerPointsException2)\r\n                            }\r\n                        >\r\n                            <CartesianGrid strokeDasharray=\"3 3\"/>\r\n                            <YAxis width={40}/>\r\n                            <XAxis dataKey=\"date\"  />\r\n                            <Tooltip />\r\n                            <Legend  payload = {this.getPayload()} />\r\n                            <Line name={this.props.playerName1} type=\"monotone\" dataKey=\"points01\" stroke={this.player1Color} dot={false} strokeWidth = {2}/>\r\n                            <Line name={`${this.props.playerName1} (New Rules)`} type=\"monotone\" dataKey=\"points02\" stroke={this.player1Color} dot={false} strokeWidth = {2}/>\r\n                            <Line name={this.props.playerName1} type=\"monotone\" dataKey=\"points03\" stroke={this.player1Color} dot={false} strokeWidth = {2}/>\r\n                            {this.props.playerPointsNormal2.length > 0 && \r\n                                <Line name={this.props.playerName2} type=\"monotone\" dataKey=\"points11\" stroke={this.player2Color} dot={false} strokeWidth={2} />}\r\n                            {this.props.playerPointsNormal2.length > 0 && \r\n                                <Line name={`${this.props.playerName2} (New Rules)`} type=\"monotone\" dataKey=\"points12\" stroke={this.player2Color} dot={false} strokeWidth={2} />}\r\n                            {this.props.playerPointsNormal2.length > 0 && \r\n                                <Line name={this.props.playerName2} type=\"monotone\" dataKey=\"points13\" stroke={this.player2Color} dot={false} strokeWidth={2} />}\r\n                            <ReferenceLine x={tournamentsService.convertDateToString(exceptionInterval[0])} stroke=\"#f50057\"/>\r\n                            <ReferenceLine x={tournamentsService.convertDateToString(exceptionInterval[1])} stroke=\"#f50057\"/>\r\n                        </LineChart>\r\n                        :\r\n                        <LineChart>\r\n                            <CartesianGrid strokeDasharray=\"3 3\"/>\r\n                            <YAxis width={40}/>\r\n                            <XAxis/>\r\n                        </LineChart>\r\n                        }\r\n                    </ResponsiveContainer>\r\n                </div>}\r\n                </MediaQuery>\r\n            </>\r\n        )\r\n    }\r\n    \r\n    private readonly handleYearChange = (event: any, newValue: number | number[]) => {\r\n        this.setState({yearRange: newValue as number[]});\r\n    };\r\n\r\n\r\n}","import { CircularProgress, TextField, Typography } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid/Grid';\r\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\r\nimport $ from \"jquery\";\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { RouteComponentProps, withRouter } from 'react-router';\r\nimport { percentageExceptionList, percentageNormalList } from '../data/scorecalc-data';\r\nimport { Player } from '../services/player-service';\r\nimport tournamentsService, { PointsByDate } from '../services/tournament-service';\r\nimport { RootState } from '../store/combineReducers';\r\nimport PlayerCard from './player-card';\r\nimport { PlayersChart } from './players-chart';\r\n\r\ninterface Params{\r\n    id: string\r\n}\r\n\r\ntype Props = ReturnType<typeof mapStateToProps> & RouteComponentProps<Params>\r\n\r\ninterface State{\r\n    playerPointsNormal1: PointsByDate[]\r\n    playerPointsException1: PointsByDate[]\r\n    playerPointsNormal2: PointsByDate[]\r\n    playerPointsException2: PointsByDate[]\r\n    playerName1?: string\r\n    playerName2?: string\r\n    \r\n    playerUpdating: boolean\r\n    selectedPlayer: Player | null\r\n}\r\n\r\ninterface PlayerPoints{\r\n    normal: PointsByDate[],\r\n    exception: PointsByDate[]\r\n}\r\n\r\nexport class ProgressComponent extends Component<Props, State>{\r\n\r\n    public readonly state:State = {\r\n        playerPointsNormal1: [],\r\n        playerPointsException1: [],\r\n        playerPointsNormal2: [],\r\n        playerPointsException2: [],\r\n        \r\n        playerUpdating: false,\r\n        selectedPlayer: null\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(this.props.match.params.id !== undefined && this.props.players.length){\r\n            this.handlePlayerChange(undefined, this.getPlayerValue())\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props){\r\n        if(prevProps.players.length !== this.props.players.length && this.props.match.params.id !== undefined ||\r\n           prevProps.match.params.id !== this.props.match.params.id && this.props.players.length){\r\n            this.handlePlayerChange(undefined, this.getPlayerValue())\r\n        }\r\n    }\r\n\r\n\r\n    getPlayerValue(): Player | null{\r\n        let player = this.props.players.find(player => player.id === this.props.match.params.id)\r\n        if(player === undefined){\r\n            return null\r\n        }\r\n\r\n        return player\r\n    }\r\n    \r\n\r\n    render(): React.ReactNode{\r\n        return(\r\n            (this.props.match.params.id !== undefined && this.props.players.length === 0) \r\n            ? \r\n            <div style={{\r\n                height:'calc(100vh - 100px)',\r\n                display:'flex', \r\n                justifyContent:\"center\", \r\n                alignItems:'center'}}\r\n            >\r\n                <CircularProgress style = {{alignSelf:'center'}}/>\r\n            </div>\r\n            :\r\n                <Grid container spacing={3}>\r\n                    <Grid item xs={12} sm={5} md={4}>\r\n                        <Grid container spacing={3}>\r\n\r\n                        <Grid item xs={12}>\r\n                            <Autocomplete\r\n                                blurOnSelect\r\n                                options = {this.props.players}\r\n                                getOptionLabel = {(option) => option.name}\r\n                                value = {this.state.selectedPlayer}\r\n                                renderInput = {(params) => \r\n                                    <TextField {...params} label=\"Select a player\" variant = \"outlined\" />\r\n                                }\r\n                                filterOptions = {createFilterOptions({\r\n                                    limit: 100\r\n                                })}\r\n                                onChange = {this.handleValueChange}\r\n                                loading = {this.props.players.length === 0}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <Autocomplete\r\n                                blurOnSelect\r\n                                options = {this.props.players}\r\n                                getOptionLabel = {(option) => option.name}\r\n                                renderInput = {(params) => \r\n                                    <TextField {...params} label=\"Select a player to compare\" />\r\n                                }\r\n                                filterOptions = {createFilterOptions({\r\n                                    limit: 100\r\n                                })}\r\n                                onChange = {this.handlePlayerCompareChange}\r\n                                loading = {this.props.players.length === 0}\r\n                            />\r\n                        </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Grid item xs sm md>\r\n                        <PlayerCard player={this.state.selectedPlayer}/>\r\n                    </Grid>\r\n                    <Grid item xs = {12}>\r\n                        <div style={{position: \"relative\"}}>\r\n                            {\r\n                                <div style={(this.state.playerUpdating || this.state.playerName1 === undefined) ? {filter:\"blur(5px)\"} : undefined }>\r\n                                    \r\n                                    <PlayersChart \r\n                                        playerPointsNormal1={this.state.playerPointsNormal1} \r\n                                        playerPointsException1={this.state.playerPointsException1}\r\n                                        playerPointsNormal2={this.state.playerPointsNormal2} \r\n                                        playerPointsException2={this.state.playerPointsException2}\r\n                                        playerName1={this.state.playerName1}\r\n                                        playerName2={this.state.playerName2}\r\n                                    />\r\n                                </div>\r\n                            }\r\n                            {\r\n                                (this.state.playerUpdating || this.state.playerName1 === undefined) && \r\n                                <div style={{\r\n                                    position:\"absolute\", \r\n                                    width:\"100%\", \r\n                                    height:\"500px\", \r\n                                    top:0, \r\n                                    left:0, \r\n                                    display:'flex', \r\n                                    justifyContent:\"center\", \r\n                                    alignItems:'center'\r\n                                }}>\r\n                                    {this.state.playerName1 !== undefined ?\r\n\r\n                                        <CircularProgress  />\r\n                                        :\r\n                                        <Typography>\r\n                                            Select a player to load chart\r\n                                        </Typography>\r\n                                    }\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                    </Grid>\r\n                </Grid>\r\n        )\r\n\r\n    }\r\n\r\n    \r\n    private readonly handleValueChange = (event: any, newValue: Player|null) => {\r\n        if(newValue === null){\r\n            this.props.history.push(`/players`)\r\n        }\r\n        else{\r\n            this.props.history.push(`/players/${newValue.id}`)\r\n        }\r\n    }\r\n    private readonly handlePlayerChange = (event: any, newValue: Player|null) =>{\r\n        this.setState({playerName1: newValue?.name, selectedPlayer: newValue})\r\n        this.getPlayerPoints(newValue).then((value) => {\r\n            this.setState({\r\n                playerPointsNormal1: value.normal,\r\n                playerPointsException1: value.exception\r\n            })\r\n            \r\n        })\r\n    }\r\n    private readonly handlePlayerCompareChange = (event: any, newValue: Player|null) =>{\r\n        this.getPlayerPoints(newValue).then((value) => {\r\n            this.setState({\r\n                playerPointsNormal2: value.normal,\r\n                playerPointsException2: value.exception,\r\n                playerName2: newValue?.name\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    private readonly getPlayerPoints = (newValue: Player|null): Promise<PlayerPoints> =>{\r\n        var promise = new Promise<PlayerPoints>((resolve, reject) => {\r\n            if(newValue === null){\r\n                resolve( {\r\n                    normal: [],\r\n                    exception: []\r\n                })\r\n            }\r\n            else{\r\n                this.setState({playerUpdating: true})\r\n                $.getJSON('https://serene-crag-74633.herokuapp.com/tournaments/'+newValue.id)\r\n                .then(res => {\r\n                    resolve({\r\n                        normal: tournamentsService.getPointsByDate(res, percentageNormalList),\r\n                        exception: tournamentsService.getPointsByDate(res, percentageExceptionList)\r\n                    })\r\n                })\r\n                .catch(() => {\r\n                    console.log(\"error\")\r\n                    resolve( {\r\n                        normal: [],\r\n                        exception: []\r\n                    })\r\n                })\r\n                .always(() => {\r\n                    this.setState({playerUpdating: false})\r\n                })\r\n            }\r\n\r\n        })\r\n        return promise\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) =>({\r\n    players: state.players.players\r\n});\r\n\r\nconst Progress = connect(mapStateToProps)(ProgressComponent)\r\nexport {Progress};\r\n","import { AppBar, Box, Button, Container, Divider, Drawer, IconButton, List, ListItem, ListItemText, Typography } from \"@material-ui/core\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport CSS from 'csstype';\r\nimport React from \"react\";\r\nimport MediaQuery from \"react-responsive\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\n\r\nconst navBarItemStyle:CSS.Properties = {\r\n    margin:'10px',\r\n    alignSelf:'center'\r\n}\r\n\r\nconst buttonSelectedStyle:CSS.Properties = {\r\n    backgroundColor: '#dddddd'\r\n}\r\n\r\n\r\ninterface State{\r\n    opened: boolean\r\n}\r\n\r\ninterface navItem{\r\n    name: string\r\n    url: string\r\n}\r\n\r\nconst navList: navItem[] = [\r\n    {\r\n        name: 'Home',\r\n        url: '/'\r\n    },\r\n    {\r\n        name: 'Players',\r\n        url: '/players'\r\n    },\r\n    {\r\n        name: 'Ranker',\r\n        url: '/ranker'\r\n    },\r\n\r\n]\r\n\r\nexport class NavBar extends React.Component<{},State>{\r\n    public readonly state:State = {\r\n        opened:false\r\n    }\r\n    render(): React.ReactNode{\r\n        return(\r\n            <MediaQuery maxWidth={599}>\r\n                {(isMobile) =>\r\n                <>\r\n                {isMobile && <>\r\n                    <Drawer anchor='left' open={this.state.opened} onClose={this.toggleDrawer} style={{zIndex:999999}}>\r\n                        <Typography variant=\"h6\"style={{margin:'15px'}}>\r\n                            TH Ranker\r\n                        </Typography>\r\n                        <Divider/>\r\n                        <List style={{width:'200px'}}>\r\n                            {\r\n                                navList.map(item => \r\n                                    <ListItem component={(props) => <NavLink to={item.url} exact={item.url==='/'} activeStyle={buttonSelectedStyle} {...props}/>} onClick={this.toggleDrawer} button>\r\n                                        <ListItemText primary={item.name}/>\r\n                                    </ListItem>\r\n                                )\r\n                            }\r\n                        </List>\r\n                    </Drawer>\r\n                    </>\r\n                }\r\n                <AppBar position='sticky' color='default' style={{justifyContent:'space-between', flexDirection:'row', height:'55px'}} >\r\n                    <div style={{display:'flex'}}>\r\n                        {isMobile && \r\n                            <IconButton \r\n                                edge=\"start\" \r\n                                size='small' \r\n                                color=\"inherit\" \r\n                                onClick={this.toggleDrawer} \r\n                                style={{...navBarItemStyle, marginLeft:'10px'}}>\r\n                                <MenuIcon />\r\n                            </IconButton>\r\n                        }\r\n                        <Typography variant=\"h6\" style={navBarItemStyle}>\r\n                            TH Ranker\r\n                        </Typography>\r\n                    </div>\r\n                    {!isMobile && <div style={navBarItemStyle}>\r\n                        {\r\n                            navList.map(item => \r\n                                <Button \r\n                                    component={(props) => <NavLink to={item.url} exact={item.url==='/'} activeStyle={buttonSelectedStyle} {...props} />} \r\n                                    color=\"inherit\" \r\n                                    style={{marginLeft:'10px',  }}\r\n                                >\r\n                                    {item.name}\r\n                                </Button>\r\n                            )\r\n                        }\r\n                    </div>}\r\n                </AppBar>\r\n                <Container>\r\n                    <Box pt={3}>{this.props.children}</Box>\r\n                </Container>\r\n                </>\r\n            }\r\n            </MediaQuery>\r\n        )\r\n            \r\n    }\r\n    private readonly toggleDrawer = () => {\r\n        this.setState(prevState => ({\r\n            opened: !prevState.opened\r\n        }))\r\n    }\r\n}","import { Button, Typography } from \"@material-ui/core\";\r\nimport { Whatshot } from \"@material-ui/icons\";\r\nimport React, { useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport { RootState } from \"../store/combineReducers\";\r\nimport { PlayerHomeCard } from \"./player-card\";\r\n\r\n\r\nfunction getSkeletons(count: number){\r\n    let skeletons = []\r\n    for(let i=0; i<count; i++){\r\n        skeletons.push(<PlayerHomeCard/>)\r\n    }\r\n    return skeletons\r\n}\r\n\r\n\r\nexport function Home(){\r\n    \r\n    const isMobile = useMediaQuery({maxWidth:'599px'})\r\n    const [playerCount, setPlayerCount] = useState(6)\r\n\r\n    const players = useSelector(\r\n        (state: RootState) => \r\n        state.players.players.slice(0, playerCount)\r\n    )\r\n    return(\r\n        <>\r\n            <div style={{display:'flex', justifyContent:'center'}}>\r\n                <div style={{alignSelf:'stretch'}}><Whatshot fontSize='large' style={{ color:'#2c387e'}}/></div>\r\n\r\n                    <Typography \r\n                        variant='h4' \r\n                        align='center'\r\n                        style={{\r\n                            color:'white', \r\n                            marginBottom:'20px', \r\n                            WebkitTextStroke:'1px', \r\n                            WebkitTextStrokeColor:'#3f51b5',\r\n                        }}\r\n                        >\r\n                        <b>TOP PLAYERS</b>\r\n                    </Typography>\r\n            </div>\r\n            <div \r\n                style={!isMobile ? {\r\n                    display:'grid', \r\n                    gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))',\r\n                    gridGap:'20px'\r\n                }:\r\n                {\r\n                    display:'grid', \r\n                    gridGap:'20px'\r\n                }\r\n            }>\r\n                {\r\n                    players.length > 0 ? players.map(value =>\r\n                        <PlayerHomeCard player={value}/>\r\n                    ) : getSkeletons(playerCount)   \r\n                }\r\n            </div>\r\n            <div style={{textAlign:'center', margin:'20px'}}>\r\n                <Button \r\n                    variant='outlined' \r\n                    color='primary' \r\n                    onClick={() => {\r\n                        console.log(isMobile)\r\n                        setPlayerCount(playerCount+6)\r\n                    }}\r\n                    style={{width:'200px'}}\r\n                >\r\n                    Load More\r\n                </Button>\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, HashRouter } from 'react-router-dom';\r\nimport { Route } from 'react-router';\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\nimport { Ranker } from './components/ranker';\r\nimport playersService, { Player } from './services/player-service';\r\nimport { AnyAction, Dispatch } from 'redux';\r\nimport { updatePlayers, updatePlayersState } from './store/players/player-actions';\r\nimport { connect } from 'react-redux';\r\nimport $ from \"jquery\";\r\nimport { Progress } from './components/progress';\r\nimport { NavBar } from './components/navbar';\r\nimport tournamentsService from './services/tournament-service';\r\nimport { PlayersState } from './store/players/player-types';\r\nimport { Home } from './components/home';\r\n\r\ntype Props = ReturnType<typeof mapDispatchToProps> \r\n\r\nclass AppComponent extends Component<Props, {}> {\r\n  \r\n  componentDidMount(): void{\r\n    $.ajax('https://serene-crag-74633.herokuapp.com/all')\r\n      .then(res => {\r\n          const players:Player[] =  playersService.parseContent(res)\r\n          this.props.updatePlayersState({\r\n            prefScores: playersService.getPlayerScores(players),\r\n            players\r\n          })\r\n      })\r\n      .catch(() => {\r\n          console.log(\"error\")\r\n      })\r\n  }\r\n  \r\n  static displayName = AppComponent.name;\r\n  \r\n  render () {\r\n    return (\r\n      <HashRouter>\r\n        <NavBar>\r\n          <Route exact path='/' component={Home} />\r\n          <Route exact path='/ranker' component={Ranker} />\r\n          <Route exact path= '/players/:id?' component={Progress} />\r\n        </NavBar>\r\n      </HashRouter>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<AnyAction>) =>({\r\n  updatePlayersState: (playersState: PlayersState) => dispatch(updatePlayersState(playersState))\r\n});\r\n\r\nconst App = connect(null, mapDispatchToProps)(AppComponent)\r\nexport default App","import { Player } from \"../../services/player-service\";\r\nimport { PlayersActionTypes, PlayersState, UPDATE_PLAYERS, UPDATE_PLAYERS_STATE } from \"./player-types\";\r\n\r\nexport function updatePlayers(newPlayers: Player[]): PlayersActionTypes{\r\n    return {\r\n        type: UPDATE_PLAYERS,\r\n        payload: newPlayers\r\n    }\r\n}\r\nexport function updatePlayersState(playersState: PlayersState): PlayersActionTypes{\r\n    return {\r\n        type: UPDATE_PLAYERS_STATE,\r\n        payload: playersState\r\n    }\r\n}","import { Player } from \"../../services/player-service\";\r\n\r\nexport const UPDATE_PLAYERS = 'UPDATE_PLAYERS'\r\nexport const UPDATE_PLAYERS_STATE = 'UPDATE_PLAYERS_STATE'\r\n\r\nexport interface PlayersState {\r\n    players: Player[],\r\n    prefScores: number[]\r\n}\r\n\r\ninterface UpdatePlayersStateAction {\r\n    type: typeof UPDATE_PLAYERS_STATE\r\n    payload: PlayersState\r\n}\r\n\r\ninterface UpdatePlayersAction {\r\n    type: typeof UPDATE_PLAYERS\r\n    payload: Player[]\r\n}\r\n\r\nexport type PlayersActionTypes = \r\n    | UpdatePlayersStateAction\r\n    | UpdatePlayersAction","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { PlayersActionTypes, PlayersState, UPDATE_PLAYERS, UPDATE_PLAYERS_STATE } from \"./player-types\";\r\n\r\nconst initialState: PlayersState = {\r\n    players: [],\r\n    prefScores: []\r\n}\r\n\r\nexport function playersReducer(\r\n    state = initialState,\r\n    action: PlayersActionTypes\r\n\r\n): PlayersState {\r\n    switch(action.type){\r\n        case UPDATE_PLAYERS:\r\n            return{\r\n                ...state,\r\n                players: action.payload\r\n            }\r\n        case UPDATE_PLAYERS_STATE:\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}","import { levelList } from \"../../data/scorecalc-data\";\r\nimport { RankerActionTypes, RankerState, UPDATE_RANKER_STATE } from \"./ranker-types\";\r\n\r\nconst initialState: RankerState = {\r\n    playersCompare: [],\r\n    selectedLevel: levelList[0].name,\r\n    bottomNavVal: 0\r\n}\r\n\r\nexport function rankerReducer(\r\n    state = initialState,\r\n    action: RankerActionTypes\r\n\r\n): RankerState {\r\n    switch(action.type){\r\n        case UPDATE_RANKER_STATE:\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}","import { combineReducers } from \"redux\";\r\nimport { playersReducer } from \"./players/player-reducers\";\r\nimport { rankerReducer } from \"./ranker/ranker-reducers\";\r\n\r\nconst rootReducer = combineReducers({\r\n    players: playersReducer,\r\n    ranker: rankerReducer\r\n})\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport default rootReducer;\r\n","import store from './createStore';\r\n\r\nexport default store;","import { createStore } from 'redux';\r\nimport reducer from './combineReducers';\r\n\r\nexport default createStore(reducer);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}